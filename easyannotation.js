!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).easyannotation={})}(this,(function(e){"use strict";var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,r)};function r(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}function n(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}var i,o,a,l=function(){},s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enabled=!0,t}return r(t,e),t.prototype.setEnabled=function(e){e!=this.enabled&&(this.enabled=e,e?this.element.classList.remove("btn-disabled"):this.element.classList.add("btn-disabled"))},t}(l),c=function(e){function t(){var t=e.call(this)||this;return t.pushed=!1,t.iconSVG="",t}return r(t,e),t.prototype.setPushed=function(e){this.pushed=e},t}(s),d=function(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null},p=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],u=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],h=function(){function e(){}return e.blurData=function(e,t){!function(e,t){var r,n,i,o,a,l,s,c,h,g,f,m,v,y,w,b,x,S,E,k,A,L,C,D,M=e.data,T=e.width,N=e.height,I=t+t+1,O=T-1,R=N-1,z=t+1,B=z*(z+1)/2,V=new d,P=null,H=V,G=null,F=null,X=p[t],_=u[t];for(i=1;i<I;i++)H=H.next=new d,i===z&&(P=H);for(H.next=V,s=l=0,n=0;n<N;n++){for(b=x=S=E=c=h=g=f=0,m=z*(k=M[l]),v=z*(A=M[l+1]),y=z*(L=M[l+2]),w=z*(C=M[l+3]),c+=B*k,h+=B*A,g+=B*L,f+=B*C,H=V,i=0;i<z;i++)H.r=k,H.g=A,H.b=L,H.a=C,H=H.next;for(i=1;i<z;i++)o=l+((O<i?O:i)<<2),c+=(H.r=k=M[o])*(D=z-i),h+=(H.g=A=M[o+1])*D,g+=(H.b=L=M[o+2])*D,f+=(H.a=C=M[o+3])*D,b+=k,x+=A,S+=L,E+=C,H=H.next;for(G=V,F=P,r=0;r<T;r++)M[l+3]=C=f*X>>_,0!==C?(C=255/C,M[l]=(c*X>>_)*C,M[l+1]=(h*X>>_)*C,M[l+2]=(g*X>>_)*C):M[l]=M[l+1]=M[l+2]=0,c-=m,h-=v,g-=y,f-=w,m-=G.r,v-=G.g,y-=G.b,w-=G.a,o=s+((o=r+t+1)<O?o:O)<<2,c+=b+=G.r=M[o],h+=x+=G.g=M[o+1],g+=S+=G.b=M[o+2],f+=E+=G.a=M[o+3],G=G.next,m+=k=F.r,v+=A=F.g,y+=L=F.b,w+=C=F.a,b-=k,x-=A,S-=L,E-=C,F=F.next,l+=4;s+=T}for(r=0;r<T;r++){for(x=S=E=b=h=g=f=c=0,m=z*(k=M[l=r<<2]),v=z*(A=M[l+1]),y=z*(L=M[l+2]),w=z*(C=M[l+3]),c+=B*k,h+=B*A,g+=B*L,f+=B*C,H=V,i=0;i<z;i++)H.r=k,H.g=A,H.b=L,H.a=C,H=H.next;for(a=T,i=1;i<=t;i++)l=a+r<<2,c+=(H.r=k=M[l])*(D=z-i),h+=(H.g=A=M[l+1])*D,g+=(H.b=L=M[l+2])*D,f+=(H.a=C=M[l+3])*D,b+=k,x+=A,S+=L,E+=C,H=H.next,i<R&&(a+=T);for(l=r,G=V,F=P,n=0;n<N;n++)M[3+(o=l<<2)]=C=f*X>>_,C>0?(C=255/C,M[o]=(c*X>>_)*C,M[o+1]=(h*X>>_)*C,M[o+2]=(g*X>>_)*C):M[o]=M[o+1]=M[o+2]=0,c-=m,h-=v,g-=y,f-=w,m-=G.r,v-=G.g,y-=G.b,w-=G.a,o=r+((o=n+z)<R?o:R)*T<<2,c+=b+=G.r=M[o],h+=x+=G.g=M[o+1],g+=S+=G.b=M[o+2],f+=E+=G.a=M[o+3],G=G.next,m+=k=F.r,v+=A=F.g,y+=L=F.b,w+=C=F.a,b-=k,x-=A,S-=L,E-=C,F=F.next,l+=T}}(e,t)},e}(),g=function(){function e(){}return e.checkMobile=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&window.innerWidth<=720&&window.innerHeight<=1280&&(t=!0),t},e.isMobileDevice=function(){return this.isMobile},e.isPhone=function(){return this._isMobilePhone},e.isEdge=function(){return this._isEdge},e.getBrowserSpec=function(){var e,t=navigator.userAgent,r=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(r[1])?{name:"IE",version:(e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""}:"Chrome"===r[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?{name:e[1].replace("OPR","Opera"),version:e[2]}:(r=r[2]?[r[1],r[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&r.splice(1,1,e[1]),{name:r[0],version:r[1]})},e.fixIOSSlider=function(e){/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&(e.addEventListener("touchstart",this.onSliderTouch),e.addEventListener("touchmove",this.onSliderTouch))},e.exportToPNG=function(e,t,r){var n=t.width.baseVal.value,i=t.height.baseVal.value,o=document.createElement("canvas"),a=o.getContext("2d");o.width=n,o.height=i,a.drawImage(e,0,0,n,i);for(var l,s,c=new DOMParser,d=t.outerHTML,p=d.indexOf("<foreignObject");p>=0;)l=d.lastIndexOf("<g",p),s=d.indexOf("</g>",p+20),p=(d=d.substring(0,l)+d.substr(s+4)).indexOf("<foreignObject");var u,g=c.parseFromString(d,"text/xml"),f=g.getElementsByTagName("defs")[0],m=f.getElementsByTagName("pattern"),v=m.length;for(u=0;u<v;u++)if(0===m[u].id.indexOf("mainFillPattern")){f.removeChild(m[u]);break}for(var y=g.getElementsByTagName("svg")[0].firstChild,w=new Array;y;){if("g"==y.nodeName.toLowerCase()){var b=y.firstChild;if("rect"==b.nodeName.toLowerCase()){var x=y.transform.baseVal.getItem(0).matrix,S=x.e,E=x.f,k=b,A=k.getAttribute("filter");if(k.classList.contains("blur-rect")&&A&&A.indexOf("#bluringFilter")>0)for(var L=A.substr(5,A.length-6),C=f.firstChild;C;){if("filter"==C.nodeName.toLowerCase()&&C.id==L){var D=C.firstChild.getAttribute("stdDeviation");w.push({x:k.x.baseVal.value+S,y:k.y.baseVal.value+E,w:k.width.baseVal.value,h:k.height.baseVal.value,b:parseFloat(D)});break}C=C.nextSibling}}}y=y.nextSibling}var M=new Blob([d],{type:"image/svg+xml"}),T=URL.createObjectURL(M),N=new Image;N.onload=function(){var t=document,o=t.createElement("canvas"),a=o.getContext("2d"),l=function(){a.drawImage(N,0,0),URL.revokeObjectURL(T);var e=o.toDataURL("image/png");r(e)},s=function(r,n){var i=t.createElement("canvas"),o=i.getContext("2d"),c=r[n],d=c.w,p=c.h;i.width=d,i.height=p,o.drawImage(e,c.x,c.y,d,p,0,0,d,p);var u=o.getImageData(0,0,d,p);h.blurData(u,Math.floor(2.5*c.b)),o.putImageData(u,0,0);var g=i.toDataURL("image/png"),f=new Image(d,p);f.onload=function(){a.drawImage(f,c.x,c.y),n<r.length-1?s(r,n+1):l()},f.src=g};o.width=n,o.height=i,a.drawImage(e,0,0,n,i),0==w.length?l():s(w,0)},N.src=T},e.on=function(e,t,r){var i,o,a,l,s;s=Array.isArray(e)?e:[e];try{for(var c=n(s),d=c.next();!d.done;d=c.next()){var p=d.value;try{for(var u=(a=void 0,n(t)),h=u.next();!h.done;h=u.next()){var g=h.value;p.addEventListener(g,r,{capture:!1})}}catch(e){a={error:e}}finally{try{h&&!h.done&&(l=u.return)&&l.call(u)}finally{if(a)throw a.error}}}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.un=function(e,t,r){var i,o,a,l,s;s=Array.isArray(e)?e:[e];try{for(var c=n(s),d=c.next();!d.done;d=c.next()){var p=d.value;try{for(var u=(a=void 0,n(t)),h=u.next();!h.done;h=u.next()){var g=h.value;p.removeEventListener(g,r,{capture:!1})}}catch(e){a={error:e}}finally{try{h&&!h.done&&(l=u.return)&&l.call(u)}finally{if(a)throw a.error}}}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}},e.getEvent=function(e){var t=e;return t.touches&&(t=t.touches[0]),t},e.isMobile=!!(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)),e._isMobilePhone=e.checkMobile(),e._isEdge=window.navigator.userAgent.indexOf("Edge")>-1,e.onSliderTouch=function(e){if(e.touches.length){var t=e.target,r=t.getBoundingClientRect(),n=(e.touches[0].screenX-r.left)*parseInt(t.max,10)/r.width;t.value=Math.round(n)+""}},e}(),f=function(){function e(){var e=this;this.height=200,this.orientationChange=function(){var t=e.container,r=window.screen;t.style.height=r.height+"px",t.style.width=r.width+"px"},this.onTouchMove=function(e){e.preventDefault()}}return e.getOpenDialog=function(){return this.openDialog},e.prototype.show=function(t,r,n){e.openDialog=this;var i=t.getBoundingClientRect(),o=this,a=o.container,l=g.isPhone();if(o.callback=n,t.parentElement.appendChild(a),a.style.display="block",l)a.classList.add("ea-mobile-dialog"),a.addEventListener("touchmove",o.onTouchMove),window.addEventListener("orientationchange",o.orientationChange);else{var s=t.parentElement.getBoundingClientRect();a.style.left=i.left-s.left+"px",i.top+o.height>window.innerHeight&&(a.style.top=window.innerHeight-(i.top+o.height)+"px"),a.style.height=o.height+"px"}setTimeout((function(){g.isMobileDevice()?window.addEventListener("touchstart",o.hideDialog):window.addEventListener("click",o.hideDialog)}),500)},e.prototype.hideDialog=function(e){for(var t=e.target,r=this.container;t;){if(t==r)return;var n=t.className;if("string"==typeof n&&n.indexOf("ea-color-picker")>=0)return;t=t.parentElement}this.hide()},e.prototype.hide=function(){e.openDialog=null,g.isMobileDevice()?window.removeEventListener("touchstart",this.hideDialog):window.removeEventListener("click",this.hideDialog),this.container.parentElement.removeChild(this.container)},e.openDialog=null,e}(),m=function(){function e(e,t,r,i){var o=this;this.showMoreIcons=function(){var e,t,r=o,i=r.submenuContainer;if(!i){(i=document.createElement("div")).classList.add(r.config.ui+"-toolbar-submenu"),r.container.appendChild(i);var a=r.config.ui+"-toolbar-submenu-item";try{for(var l=n(r.submenuItems),s=l.next();!s.done;s=l.next()){var c=s.value;c.element.classList.contains(a)||c.element.classList.add(a),i.appendChild(c.element)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}g.isMobileDevice()?window.addEventListener("touchstart",r.hideSubMenu):window.addEventListener("mousedown",r.hideSubMenu),r.submenuContainer=i}"block"==i.style.display?i.style.display="none":i.style.display="block"},this.hideSubMenu=function(e){var t=o,r=e.target,n=t.submenuContainer;if(n){for(;r;){if(r==n)return;if(!(r instanceof HTMLElement||r instanceof SVGElement))break;r=r.parentElement}n.style.display="none"}};var a=this;a.items=t,a.itemClickHandler=r,a.parent=i,a.config=e,a.init(e)}return e.prototype.init=function(e){var t,r,i=document.createElement("div");i.className=e.ui+"-toolbar",e.toolbarCls&&i.classList.add(e.toolbarCls);try{for(var o=n(this.items),a=o.next();!a.done;a=o.next()){var l=a.value,s=this.getUIElement(e,l);l.element=s,i.appendChild(s)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}e.targetElement.appendChild(i),this.container=i},e.prototype.getContainer=function(){return this.container},e.prototype.getUIElement=function(e,t){var r=this,n=document.createElement("div");return n.className=e.ui+"-toolbar-item",t.itemId&&(n.id=t.itemId),t.title&&(n.title=t.title),n.onclick=function(e){f.getOpenDialog()&&f.getOpenDialog().hide(),e.stopPropagation(),r.itemClickHandler.call(r.parent,e,t),r.submenuContainer&&(r.submenuContainer.style.display="none")},t.iconSVG?n.innerHTML=t.iconSVG:t.iconURL&&(n.style.backgroundImage=t.iconURL,n.className+=" toolbar-url-icon"),n},e.prototype.deselectAll=function(e){var t,r,i;try{for(var o=n(this.items),a=o.next();!a.done;a=o.next())(i=a.value)!=e&&i instanceof c&&i.setPushed(!1)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},e.prototype.doLayout=function(){var e,t=this,r=t.items,n=r.length,i=r.length,o=t.container,a=o.getBoundingClientRect().width,l=a/i;for(e=(l=Math.min(30,Math.max(24,l)))*r.length;e>a;)l=a/--i,e=(l=Math.min(30,Math.max(24,l)))*i;if(i<n){t.submenuItems||(t.submenuItems=[]);var s=void 0,c=void 0;for(s=i-2;s<n-1;s++)c=r[s],t.submenuItems.push(c),o.removeChild(c.element);var d=t.showMenuItemsButton;if(null==d){d=document.createElement("div");var p=t.config.ui;d.innerHTML="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 448 512'><path class=\"ea-button\" d='M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34zm192-34l-136-136c-9.4-9.4-24.6-9.4-33.9 0l-22.6 22.6c-9.4 9.4-9.4 24.6 0 33.9l96.4 96.4-96.4 96.4c-9.4 9.4-9.4 24.6 0 33.9l22.6 22.6c9.4 9.4 24.6 9.4 33.9 0l136-136c9.4-9.2 9.4-24.4 0-33.8z'></path></svg>",d.classList.add(p+"-toolbar-item"),d.addEventListener("click",t.showMoreIcons),o.appendChild(d)}}},e}(),v=function(){function e(){}return e.getNextAnnotatorIdx=function(){return this.annotatorIdx++},e.getSVGElement=function(e){var t=document.getElementsByTagName("svg"),r=null,n="easyAnnotatorSVGContainer"+e.annotatorIdx;if(t.length)for(var i=0;i<t.length;i++)if(t[i].id==n){r=t[i];break}return r||(r=document.createElementNS("http://www.w3.org/2000/svg","svg")),r},e.createTransform=function(e){return this.getSVGElement(e).createSVGTransform()},e.getDefs=function(e){var t,r=this.getSVGElement(e),n=r.getElementsByTagName("defs");return 0==n.length?(t=document.createElementNS("http://www.w3.org/2000/svg","defs"),r.appendChild(t)):t=n[0],t},e.addToDefs=function(e,t){var r,n=t.id,i=this.getDefs(e),o=i.getElementsByTagName(t.tagName),a=o.length;for(r=0;r<a;r++)if(o[r].id==n)return;i.appendChild(t)},e.createBlurFilter=function(t,r){var n=document.createElementNS("http://www.w3.org/2000/svg","filter");return n.setAttribute("id","blurFilter_"+t.annotatorIdx+"_"+this.filterIdx++),n.setAttribute("width","200%"),n.setAttribute("height","200%"),n.setAttribute("x","-50%"),n.setAttribute("y","-50%"),n.innerHTML='<feGaussianBlur stdDeviation="'+parseInt(r.value,10)+'"/>',e.addToDefs(t,n),n},e.createShadowFilter=function(t,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","filter");return i.setAttribute("id","blurFilter_"+t.annotatorIdx+"_"+this.filterIdx++),i.setAttribute("width","200%"),i.setAttribute("height","200%"),i.setAttribute("x","-50%"),i.setAttribute("y","-50%"),this.setShadowFilterValue(i,r,n),e.addToDefs(t,i),i},e.setShadowFilterValue=function(e,t,r){var n=parseInt(t.value,10),i="";r&&(i='<feGaussianBlur in="SourceGraphic" stdDeviation="'+parseInt(r.value,10)+'" result="DROPBLUR"></feGaussianBlur>'),i+='<feGaussianBlur in="SourceGraphic" stdDeviation="'+n+'" result="DROP"></feGaussianBlur>            <feOffset in="SHADOW" result="DROPSHADOW" dx="'+n+'" dy="'+n+'"></feOffset>            <feColorMatrix type="matrix" in="DROPSHADOW" result="FINALSHADOW" values="1 0 0 0 0\t\t\t\t\t  0 1 0 0 0 \t\t\t\t\t  0 0 1 0 0 \t\t\t\t\t  0 0 0 0.7 0">        </feColorMatrix>        <feMerge>            <feMergeNode in="FINALHADOW"></feMergeNode>            <feMergeNode in="'+(r?"DROPBLUR":"SourceGraphic")+'"></feMergeNode>        </feMerge>',e.innerHTML=i},e.createFillPattern=function(e,t,r){var n=this.getDefs(e);if(t>0){if(r)try{r.parentNode==n&&n.removeChild(r)}catch(e){}var i="fillPattern_"+this.annotatorIdx+"_"+this.patternIdx+"_"+t,o=document.createElementNS("http://www.w3.org/2000/svg","pattern");o.id=i,o.setAttribute("patternUnits","userSpaceOnUse"),o.setAttribute("viewBox","0 0 12 20");var a=["M0 20 L12 0","M0 0 L12 20","M6 0 L6 20","M0 10 L12 10","M0 10 L12 10 M6 0 L6 20","M0 20 L12 0 M0 0 L12 20","M0 20 L12 0 M0 0 L12 20","M 5,5 A 1 1 0 1 0 2 5","M 5,5 A 3 3 0 1 0 2 5"];return t<=6?(o.setAttribute("width","12"),o.setAttribute("height","20")):(o.setAttribute("width","10"),o.setAttribute("height","10")),t<=a.length&&(o.innerHTML='<path d="'+a[t-1]+'"/>'),n.appendChild(o),o}},e.createArrowMarker=function(e,t,r,n){var i=document.createElementNS("http://www.w3.org/2000/svg","marker"),o=this.getDefs(e),a=null,l="";switch(r&&o.removeChild(r),i.setAttribute("id","arrowMarker_"+this.annotatorIdx+"_"+this.arrowMarkerIdx++),i.setAttribute("markerWidth","7"),i.setAttribute("markerHeight","8"),i.setAttribute("refX","5"),i.setAttribute("refY","4"),i.setAttribute("orient","auto"),t){case 0:a=document.createElementNS("http://www.w3.org/2000/svg","polygon"),n?a.setAttribute("points","1,4 6,1 6,7"):a.setAttribute("points","0,1 6,4 0,7");break;case 1:a=document.createElementNS("http://www.w3.org/2000/svg","polyline"),n?(i.setAttribute("refX","1"),a.setAttribute("points","6,1 0 4 6,7")):a.setAttribute("points","1 3.5 6,1 6,7"),l=" arrow-no-fill";break;case 2:(a=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","0,0 5,0 5,5 0,5 0,0"),i.setAttribute("refY","3");break;case 3:(a=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","1,3.5 3.5,1 6,3.5 3.5,6"),i.setAttribute("refY","3.5");break;case 4:(a=document.createElementNS("http://www.w3.org/2000/svg","circle")).setAttribute("cx","3"),a.setAttribute("cy","3"),a.setAttribute("r","3"),i.setAttribute("refY","3"),i.setAttribute("refX","3"),l=" arrow-no-stroke";break;case 5:(a=document.createElementNS("http://www.w3.org/2000/svg","polyline")).setAttribute("points","1,0 1,8"),i.setAttribute("refX","1")}return a.style.strokeLinejoin="miter",i.appendChild(a),o.appendChild(i),a.setAttribute("class",e.ui+"-arrow-head"+l),[i,a]},e.annotatorIdx=0,e.patternIdx=0,e.arrowMarkerIdx=0,e.filterIdx=0,e}();!function(e){e[e.SOLID=0]="SOLID",e[e.DOTTED=1]="DOTTED",e[e.DASHED=2]="DASHED"}(i||(i={})),function(e){e[e.NONE=0]="NONE",e[e.ARROW=1]="ARROW",e[e.OPEN_ARROW=2]="OPEN_ARROW",e[e.RECT=3]="RECT",e[e.DIAMOND_ARROW=4]="DIAMOND_ARROW",e[e.OVAL_ARROW=5]="OVAL_ARROW",e[e.LINE_ARROW=6]="LINE_ARROW"}(o||(o={})),function(e){e[e.BLUR=1]="BLUR",e[e.SHADOW=2]="SHADOW"}(a||(a={}));var y=function(){function e(e,t){var r=this;this.properties=[],this.RESIZE_ELEM_SIZE=8,this.fillPattern=null,this.filters={},this.drawStyle={startArrow:0,endArrow:0,width:2,type:i.SOLID,color:"#000"},this.fillStyle={fillType:0,color:"#000"},this.startDrag=function(e,t){var n=r;n.startX=e,n.startY=t,n.isDragging=!0,n.elementMatrix=n.svgGroupElement.transform.baseVal.getItem(0).matrix.translate(0,0),n.parent.startDrag(e,t),n.onSelectHandler&&n.onSelectHandler(n)},this.onTouchStart=function(e){var t=e.changedTouches[0];e.stopPropagation(),r.setSelected(!0),r.startDrag(t.screenX,t.screenY)},this.onMouseDown=function(e){e.stopPropagation(),r.setSelected(!0);var t=r.getPixelRatio();r.startDrag(e.screenX/t,e.screenY/t)},this.onTouchEnd=function(e){r.isDragging=!1},this.onMouseUp=function(e){r.isDragging=!1},this.onTouchMove=function(e){var t=r;if(e.stopImmediatePropagation(),e.preventDefault(),e.stopPropagation(),t.isDragging){var n=e.changedTouches[0];t.move(n.screenX,n.screenY,n)}},this.onMouseMove=function(e){var t=r;if(t.isDragging){e.stopPropagation();var n=r.getPixelRatio();t.move(e.screenX/n,e.screenY/n,e)}};var n=this;n.config=e,n.parent=t,n.width=200*e.sizePercentage,n.height=80*e.sizePercentage,n.init()}return e.prototype.getElement=function(){return this.svgGroupElement},e.prototype.clean=function(){},e.prototype.init=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","g"),t=this;e.transform.baseVal.appendItem(v.createTransform(t.config)),e.addEventListener("touchstart",t.onTouchStart,{passive:!1}),e.addEventListener("touchend",t.onTouchEnd,{passive:!1}),e.addEventListener("touchmove",t.onTouchMove,{passive:!1}),e.addEventListener("mousedown",t.onMouseDown),e.addEventListener("mouseup",t.onMouseUp),e.addEventListener("mousemove",t.onMouseMove),e.style.zIndex="100",this.svgGroupElement=e,t.elementMatrix=t.svgGroupElement.transform.baseVal.getItem(0).matrix.translate(0,0)},e.prototype.getPixelRatio=function(){return g.isEdge()?window.devicePixelRatio:1},e.prototype.processMouseUp=function(){this.isDragging=!1},e.prototype.move=function(e,t,r){var n=this.svgGroupElement.getScreenCTM().a;this.moveBy((e-this.startX)/n,(t-this.startY)/n,r)},e.prototype.moveBy=function(e,t,r){var n=this.svgGroupElement.transform.baseVal.getItem(0);n.setMatrix(this.elementMatrix.translate(e,t)),this.svgGroupElement.transform.baseVal.replaceItem(n,0)},e.prototype.createResizeElement=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","circle");return t.transform.baseVal.appendItem(v.createTransform(this.config)),t.setAttribute("class","anotator-resize-element"),g.isMobileDevice()?(t.setAttribute("r","10"),t.setAttribute("cx","5"),t.setAttribute("cy","5")):(t.setAttribute("r","8"),t.setAttribute("cx","4"),t.setAttribute("cy","4")),t.style.display="none",t},e.prototype.intersects=function(e,t,r,n){return!1},e.prototype.containsPoint=function(e,t){return!1},e.prototype.setStrokeType=function(e){},e.prototype.getStrokeType=function(){return this.drawStyle?this.drawStyle.type:-1},e.prototype.getStrokeWidth=function(){return this.drawStyle?this.drawStyle.width:-1},e.prototype.setStrokeWidth=function(e){},e.prototype.setDrawColor=function(e){},e.prototype.setFillColor=function(e){},e.prototype.setFillType=function(e){},e.prototype.setSelected=function(e){this.selected=e},e.prototype._setStrokeType=function(e,t){var r="none",n="unset";this.drawStyle.type=t;var o=e.style;switch(t){case i.DOTTED:var a=parseInt(o.strokeWidth,10);if(isNaN(a))return;r="1 "+(a*(a<7?2:1.5)).toString(),n="round";break;case i.DASHED:r="10%"}o.strokeDasharray=r,o.strokeLinecap=n},e.prototype._setStrokeWidth=function(e,t){var r=e.style;r.strokeWidth=t.toString(),this.drawStyle.type==i.DOTTED&&(r.strokeDasharray="1 "+(t*(t<7?2:1.5)).toString(),r.strokeLinecap="round")},e.prototype.setDrawStyle=function(e){var t=this.drawStyle;t.type=e.type,t.width=e.width,t.color=e.color,t.startArrow=e.startArrow,t.endArrow=e.endArrow,this.setDrawColor(e.color),this.setStrokeWidth(e.width),this.setStrokeType(e.type)},e.prototype.getDrawStyle=function(){return this.drawStyle},e.prototype.setFillStyle=function(e){var t,r,i,o,l=this,s=l.fillStyle,c=!1,d=!1;s.color!=e.color&&(s.color=e.color,c=!0),s.fillType!=e.fillType&&(s.fillType=e.fillType,d=!0),c&&l.setFillColor(e.color),d&&l.setFillType(e.fillType),s.opacity!=e.opacity&&(s.opacity=e.opacity,l.setOpacity(s.opacity));var p=!1,u=!1,h=l.filters,g=v.getDefs(l.config);if(h[a.BLUR]&&(g.removeChild(h[a.BLUR]),h[a.BLUR]=null),h[a.SHADOW]&&(g.removeChild(h[a.SHADOW]),h[a.SHADOW]=null),e.effects&&e.effects.length)try{for(var f=n(e.effects),m=f.next();!m.done;m=f.next()){var y=m.value,w=null;switch(y.effectType){case a.BLUR:if(p=!0,e.effects.length>1)try{for(var b=(i=void 0,n(e.effects)),x=b.next();!x.done;x=b.next()){var S=x.value;if(S.effectType==a.SHADOW){u=!0,w=S;break}}}catch(e){i={error:e}}finally{try{x&&!x.done&&(o=b.return)&&o.call(b)}finally{if(i)throw i.error}}if(h[a.BLUR])h[a.BLUR].innerHTML='<feGaussianBlur stdDeviation="'+parseInt(y.value,10)+'"/>';else if(u){var E=v.createShadowFilter(l.config,y,w);l.baseSVGElement.setAttribute("filter","url(#"+E.id+")"),h[a.BLUR]=E}else{var k=v.createBlurFilter(l.config,y);l.baseSVGElement.setAttribute("filter","url(#"+k.id+")"),h[a.BLUR]=k}break;case a.SHADOW:if(u=!0,p)break;h[a.SHADOW]?v.setShadowFilterValue(h[a.SHADOW],y):(k=v.createShadowFilter(l.config,y),l.baseSVGElement.setAttribute("filter","url(#"+k.id+")"),h[a.SHADOW]=k)}}}catch(e){t={error:e}}finally{try{m&&!m.done&&(r=f.return)&&r.call(f)}finally{if(t)throw t.error}}p||u||l.baseSVGElement.setAttribute("filter","none"),s.effects=e.effects},e.prototype.getFillStyle=function(){return this.fillStyle},e.prototype.setOpacity=function(e){e>100?e=100:e<0&&(e=0),this.baseSVGElement&&(this.baseSVGElement.style.opacity=(e/100).toString())},e.prototype.isOnTop=function(){return!1},e.prototype.toXML=function(){return null},e.prototype.fromXML=function(e){},e.prototype.getWidth=function(){return this.width},e.prototype.getHeight=function(){return this.height},e.prototype.loadXMLDraw=function(e){var t=this;t.setDrawStyle({width:t.getXMLNumber(e,"dw"),type:t.getXMLNumber(e,"dt"),color:e.getAttribute("dc")||"#000",startArrow:t.getXMLNumber(e,"sa"),endArrow:t.getXMLNumber(e,"ea")})},e.prototype.loadXMLFill=function(e){for(var t in this.setFillStyle({fillType:this.getXMLNumber(e,"ft"),color:e.getAttribute("fc")||"#000",opacity:this.getXMLNumber(e,"op")}),this.filters){var r=document.createElement("f");r.setAttribute("i",t),r.setAttribute("v",this.filters[t]),e.appendChild(r)}},e.prototype.getXMLNumber=function(e,t){var r=e.getAttribute(t),n=0;return r&&(n=parseInt(r,10),isNaN(n)&&(n=0)),n},e.prototype.toJSON=function(){return null},e.prototype.fromJSON=function(e){},e.prototype.addDraw=function(e){var t=this.drawStyle;e.setAttribute("dw",t.width.toString()),e.setAttribute("dt",t.type.toString()),e.setAttribute("dc",t.color),e.setAttribute("sa",t.startArrow.toString()),e.setAttribute("ea",t.endArrow.toString())},e.prototype.addFill=function(e){var t=this.fillStyle;e.setAttribute("ft",t.fillType.toString()),e.setAttribute("fc",t.color),t.opacity&&e.setAttribute("op",t.opacity.toString())},e.prototype.addJSONDraw=function(e){var t=this.drawStyle;e.dw=t.width,e.dt=t.type,e.dc=t.color,e.sa=t.startArrow,e.ea=t.endArrow},e.prototype.loadJSONDraw=function(e){this.setDrawStyle({width:e.dw,type:e.dt,color:e.dc,startArrow:parseInt(e.sa,10),endArrow:parseInt(e.ea,10)})},e.prototype.loadJSONFill=function(e){this.setFillStyle({fillType:e.ft,color:e.fc,opacity:e.op})},e.prototype.addJSONFill=function(e){var t=this.fillStyle;e.ft=t.fillType,e.fc=t.color,e.op=t.opacity},e.prototype.getProperties=function(){return this.properties},e}(),w=function(){function e(){}return e.register=function(e,t){this.classList[e]=t},e.create=function(e,t){var r=this.classList[e];return r?1==t.length?new r(t[0]):new r(t[0],t[1]):null},e.classList=new Object,e}(),b=function(){function e(){}return e.FILL_PROPERTY="fill",e.DRAW_PROPERTY="draw",e.FONT_PROPERTY="font",e.BLUR_PROPERTY="blur",e}(),x=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.x1=0,n.y1=0,n.y2=0,n.onResizeTouchStart=function(e){var t=e.changedTouches[0];e.preventDefault(),n.onResizeDown(t)},n.onResizeMouseDown=function(e){n.onResizeDown(e)},n.onResizeDown=function(e){var t=n;t.currentResizeElement=e.target,t.screenX=e.screenX,t.screenY=e.screenY,t.currentResizeElement==t.resizeElement1?(t.lineStartX=t.x1,t.lineStartY=t.y1):(t.lineStartX=t.x2,t.lineStartY=t.y2)},n.onResizeMouseUp=function(e){e.preventDefault(),n.currentResizeElement=null},n.onMouseUp=function(e){n.currentResizeElement=null,n.isDragging=!1},n.processMouseUp=function(){e.prototype.processMouseUp.call(n)},n.x2=n.width,n.config=t,n.createLine(t),n.properties=[b.DRAW_PROPERTY],n}return r(t,e),t.prototype.createLine=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","line"),r=document.createElementNS("http://www.w3.org/2000/svg","line"),n=this,i=n.svgGroupElement,o=n.width.toString();t.setAttribute("x2",o),t.setAttribute("class",e.ui+"-annotator-line"),r.setAttribute("class","annotator-back-line"),r.setAttribute("x2",o),n.resizeElement1=n.createResizeElement(e),n.resizeElement2=n.createResizeElement(e),n.addResizeEvents(n.resizeElement1),n.addResizeEvents(n.resizeElement2),i.appendChild(t),i.appendChild(r),i.appendChild(n.resizeElement1),i.appendChild(n.resizeElement2),n.baseSVGElement=t,n.backLineSVG=r,n.arrangeResizeElements()},t.prototype.addResizeEvents=function(e){e.addEventListener("mousedown",this.onResizeMouseDown),e.addEventListener("mouseup",this.onResizeMouseUp),e.addEventListener("touchstart",this.onResizeTouchStart,{passive:!1}),e.addEventListener("touchend",this.onResizeMouseUp,{passive:!1})},t.prototype.clean=function(){var e=this,t=v.getDefs(e.config);e.arrowEndHead&&t.removeChild(e.arrowEndHead.parentNode),e.arrowStartHead&&t.removeChild(e.arrowStartHead.parentNode)},t.prototype.moveBy=function(t,r,n){var i=this,o=i.currentResizeElement,a=i.baseSVGElement,l=i.backLineSVG;if(o){if(o==this.resizeElement1){i.x1=i.lineStartX+n.screenX-i.screenX,i.y1=i.lineStartY+n.screenY-i.screenY;var s=i.x1.toString(),c=i.y1.toString();a.setAttribute("x1",s),a.setAttribute("y1",c),l.setAttribute("x1",s),l.setAttribute("y1",c)}else{i.x2=this.lineStartX+n.screenX-i.screenX,i.y2=this.lineStartY+n.screenY-i.screenY;var d=i.x2.toString(),p=i.y2.toString();a.setAttribute("x2",d),a.setAttribute("y2",p),l.setAttribute("x2",d),l.setAttribute("y2",p)}this.arrangeResizeElements()}else e.prototype.moveBy.call(this,t,r,n)},t.prototype.arrangeResizeElements=function(){var e=this,t=e.RESIZE_ELEM_SIZE/2,r=e.x1-t,n=e.y1-t,i=e.x2-t,o=e.y2-t;e.arrangeElement(e.resizeElement1,r,n),e.arrangeElement(e.resizeElement2,i,o)},t.prototype.arrangeElement=function(e,t,r){var n=e.transform.baseVal.getItem(0);n.setTranslate(t,r),e.transform.baseVal.replaceItem(n,0)},t.prototype.setDrawStyle=function(t){e.prototype.setDrawStyle.call(this,t);var r=t.startArrow,n=t.endArrow,i=this,o=t.color,a=i.baseSVGElement;switch(r){case 0:i.arrowStartHead&&(v.getDefs(i.config).removeChild(i.arrowStartHead.parentNode),i.arrowStartHead=null),a.setAttribute("marker-start","none");break;default:var l=v.createArrowMarker(i.config,r-1,i.arrowStartHead?i.arrowStartHead.parentNode:null,!0);a.setAttribute("marker-start","url(#"+l[0].getAttribute("id")+")"),this.arrowStartHead=l[1],l[1].style.fill=o,l[1].style.stroke=o}switch(n){case 0:i.arrowEndHead&&(v.getDefs(i.config).removeChild(i.arrowEndHead.parentNode),i.arrowEndHead=null),a.setAttribute("marker-end","none");break;default:l=v.createArrowMarker(i.config,n-1,i.arrowEndHead?i.arrowEndHead.parentNode:null),a.setAttribute("marker-end","url(#"+l[0].getAttribute("id")+")"),this.arrowEndHead=l[1],l[1].style.fill=o,l[1].style.stroke=o}},t.prototype.setDrawColor=function(e){var t=this.arrowEndHead,r=this.arrowStartHead;this.baseSVGElement.style.stroke=e,t&&(t.style.fill=e,t.style.stroke=e),r&&(r.style.fill=e,r.style.stroke=e)},t.prototype.setSelected=function(t){this.selected!==t&&(e.prototype.setSelected.call(this,t),this.resizeElement1.style.display=t?"":"none",this.resizeElement2.style.display=t?"":"none")},t.prototype.containsPoint=function(e,t){var r,n,i=this.svgGroupElement.transform.baseVal.getItem(0).matrix,o=i.e,a=i.f,l=this.x1+o,s=this.y1+a,c=this.x2+o,d=this.y2+a,p=(l-c)*(l-c)+(s-d)*(s-d);if(0==p)r=l,n=d;else{var u=((e-l)*(c-l)+(t-s)*(d-s))/p;u<0?(r=l,n=s):u>1?(r=c,n=d):(r=l+u*(c-l),n=s+u*(d-s))}return(r-e)*(r-e)+(n-t)*(n-t)<3},t.prototype.intersects=function(e,r,n,i){var o=this.svgGroupElement.transform.baseVal.getItem(0).matrix;if(n<=0||i<=0)return!1;var a=o.e,l=o.f,s=this.x1+a,c=this.y1+l,d=this.x2+a,p=this.y2+l;return t.intersectsRect(s,c,d,p,e,r,n,i)},t.intersectsRect=function(e,r,n,i,o,a,l,s){if(e>=o&&e<=o+l&&r>=a&&r<=a+s)return!0;if(n>=o&&n<=o+l&&i>=a&&i<=a+s)return!0;var c=o+l,d=a+s,p=t.linesIntersect;return p(e,r,n,i,o,a,o,d)||p(e,r,n,i,o,d,c,d)||p(e,r,n,i,c,d,c,a)||p(e,r,n,i,c,a,o,a)},t.prototype.setStrokeType=function(t){e.prototype._setStrokeType.call(this,this.baseSVGElement,t)},t.prototype.setStrokeWidth=function(t){e.prototype._setStrokeWidth.call(this,this.baseSVGElement,t)},t.prototype.toXML=function(){var e=document.createElementNS(null,this.constructor.xtype),t=this,r=this.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f;return t.addDraw(e),e.setAttribute("x1",(t.x1+n).toString()),e.setAttribute("y1",(t.y1+i).toString()),e.setAttribute("x2",(t.x2+n).toString()),e.setAttribute("y2",(t.y2+i).toString()),e},t.prototype.fromXML=function(e){var t=this;t.x1=t.getXMLNumber(e,"x1"),t.y1=t.getXMLNumber(e,"y1"),t.x2=t.getXMLNumber(e,"x2"),t.y2=t.getXMLNumber(e,"y2"),t.setCoordinates(),t.arrangeResizeElements(),t.loadXMLDraw(e)},t.prototype.setCoordinates=function(){var e=this,t=e.baseSVGElement,r=e.backLineSVG;t.setAttribute("x1",e.x1.toString()),t.setAttribute("y1",e.y1.toString()),r.setAttribute("x1",e.x1.toString()),r.setAttribute("y1",e.y1.toString()),t.setAttribute("x2",e.x2.toString()),t.setAttribute("y2",e.y2.toString()),r.setAttribute("x2",e.x2.toString()),r.setAttribute("y2",e.y2.toString())},t.prototype.toJSON=function(){var e=this,t=e.svgGroupElement.transform.baseVal.getItem(0).matrix,r=t.e,n=t.f,i={xtype:this.constructor.xtype,x1:e.x1+r,y1:e.y1+n,x2:e.x2+r,y2:e.y2+n};return e.addJSONDraw(i),i},t.prototype.fromJSON=function(e){var t=this;e.x1&&(t.x1=e.x1),e.y1&&(t.y1=e.y1),e.x2&&(t.x2=e.x2),e.y2&&(t.y2=e.y2),t.setCoordinates(),t.arrangeResizeElements(),t.loadJSONDraw(e)},t.xtype="line",t.linesIntersect=function(e,r,n,i,o,a,l,s){var c,d,p,u,h=t.between,g=t.area2;return 0==(c=g(e,r,n,i,o,a))?!!h(e,r,n,i,o,a)||0==g(e,r,n,i,l,s)&&(h(o,a,l,s,e,r)||h(o,a,l,s,n,i)):0==(d=g(e,r,n,i,l,s))?h(e,r,n,i,l,s):0==(p=g(o,a,l,s,e,r))?!!h(o,a,l,s,e,r)||0==g(o,a,l,s,n,i)&&(h(e,r,n,i,o,a)||h(e,r,n,i,l,s)):0==(u=g(o,a,l,s,n,i))?h(o,a,l,s,n,i):c>0!=d>0&&p>0!=u>0},t.area2=function(e,t,r,n,i,o){return(r-e)*(o-t)-(i-e)*(n-t)},t.between=function(e,t,r,n,i,o){return e!=r?e<=i&&i<=r||e>=i&&i>=r:t<=o&&o<=n||t>=o&&o>=n},t}(y);w.register(x.xtype,x);var S='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><line class="ea-button" style="stroke-width:3;" y1="28" x2="29" y2="2"></line></svg>',E=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=S,t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new x(e,t)},t}(s),k=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.stop=function(){this.stopped=!0},t}(y),A=function(e,t){this.x=e,this.y=t},L=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.bufferSize=6,n.buffer=[],n.points=[],n.initialized=!1,n.isDrawing=!1,n.initAnnotator=function(){var e=n,t=e.parent.getSVGContainer();e.rect=t.getBoundingClientRect(),g.isMobileDevice()?(t.addEventListener("touchstart",e.parentTouchStart,{passive:!1}),t.addEventListener("touchmove",e.parentTouchMove,{passive:!1}),t.addEventListener("touchend",e.parentTouchEnd,{passive:!1})):(t.addEventListener("mousemove",e.parentMouseMove),t.addEventListener("mousedown",e.parentMouseDown),t.addEventListener("mouseup",e.parentMouseUp)),n.svgContainer=t,n.createPath(n.config)},n.parentTouchMove=function(e){var t=n;e.preventDefault(),t.isDrawing&&t.baseSVGElement&&(t.appendToBuffer(t.getMousePosition(e.changedTouches[0])),t.updateSvgPath())},n.parentMouseMove=function(e){var t=n;e.preventDefault(),t.isDrawing&&t.baseSVGElement&&(t.appendToBuffer(t.getMousePosition(e)),t.updateSvgPath())},n.parentTouchStart=function(e){e.preventDefault(),n.startDraging(e.changedTouches[0])},n.parentMouseDown=function(e){n.startDraging(e)},n.startDraging=function(e){var t=n;t.baseSVGElement||t.createPath(t.config),t.isDrawing=!0,t.buffer=[];var r=t.getMousePosition(e);t.appendToBuffer(r),t.points.push(r),t.strPath+="M"+r.x+" "+r.y,t.baseSVGElement.setAttribute("d",t.strPath)},n.parentTouchEnd=function(e){e.preventDefault(),n.endDragging(e.changedTouches[0])},n.parentMouseUp=function(e){n.endDragging(e)},n.endDragging=function(e){var t=n;t.isDrawing=!1;var r=t.getMousePosition(e);t.appendToBuffer(r),t.updateSvgPath(),t.points.push(new A(Number.NaN,Number.NaN)),t.strPath+=" ",t.baseSVGElement.setAttribute("d",t.strPath)},n.getMousePosition=function(e){var t=n.rect;return new A(e.pageX-t.left-window.scrollX,e.pageY-t.top-window.scrollY)},n.appendToBuffer=function(e){var t=n.buffer,r=n.bufferSize;for(t.push(e);t.length>r;)t.shift()},n.getAveragePoint=function(e){var t=n.buffer.length;if(t%2==1||t>=n.bufferSize){var r=0,i=0,o=void 0,a=void 0,l=0;for(a=e;a<t;a++)l++,r+=(o=n.buffer[a]).x,i+=o.y;return{x:r/l,y:i/l}}return null},n.updateSvgPath=function(){var e=n,t=e.getAveragePoint(0);if(t){e.strPath+=" L"+t.x+" "+t.y,e.points.push(t);for(var r="",i=e.buffer.length,o=2;o<i;o+=2)r+=" L"+(t=e.getAveragePoint(o)).x+" "+t.y;e.baseSVGElement.setAttribute("d",e.strPath+r)}},n.config=t,n.strPath="",n.initAnnotator(),n.properties.push(b.DRAW_PROPERTY),n}return r(t,e),t.prototype.createPath=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("fill","none"),t.setAttribute("stroke",e.drawStyle.color),t.setAttribute("stroke-width",e.drawStyle.width.toString()),this.baseSVGElement=t,this.svgGroupElement.appendChild(t),this.parent.getSVGContainer().appendChild(this.svgGroupElement)},t.prototype.stop=function(){var e=this,t=e.parent.getSVGContainer();g.isMobileDevice()?(t.removeEventListener("touchstart",e.parentTouchStart),t.removeEventListener("touchmove",e.parentTouchMove),t.removeEventListener("touchend",e.parentTouchEnd)):(t.removeEventListener("mousemove",e.parentMouseMove),t.removeEventListener("mousedown",e.parentMouseDown),t.removeEventListener("mouseup",e.parentMouseUp)),e.initialized=!0},t.prototype.moveBy=function(t,r,n){this.initialized&&e.prototype.moveBy.call(this,t,r,n)},t.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.baseSVGElement&&(this.baseSVGElement.style.stroke=t?"green":this.drawStyle.color)},t.prototype.intersects=function(e,t,r,i){var o,a,l=this.svgGroupElement.transform.baseVal.getItem(0).matrix,s=l.e,c=l.f,d=null;try{for(var p=n(this.points),u=p.next();!u.done;u=p.next()){var h=u.value;if(isNaN(h.x))d=null;else{if(d&&x.intersectsRect(d.x+s,d.y+c,h.x+s,h.y+c,e,t,r,i))return!0;d=h}}}catch(e){o={error:e}}finally{try{u&&!u.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}return!1},t.prototype.setStrokeType=function(t){this.baseSVGElement&&e.prototype._setStrokeType.call(this,this.baseSVGElement,t)},t.prototype.setStrokeWidth=function(t){this.baseSVGElement&&e.prototype._setStrokeWidth.call(this,this.baseSVGElement,t)},t.prototype.setDrawColor=function(e){this.baseSVGElement&&(this.baseSVGElement.style.stroke=e)},t.prototype.toXML=function(){var e=document.createElementNS(null,t.xtype);this.addDraw(e),this.addFill(e);var r,n,i,o=this.points,a=o.length,l=document;for(r=0;r<a;r++)i=o[r],n=l.createElementNS(null,"p"),isNaN(i.x)||(n.setAttribute("x",i.x.toFixed(1)),n.setAttribute("y",i.y.toFixed(1))),e.appendChild(n);return e},t.prototype.fromXML=function(e){var t,r,n,i,o=this,a=e.getElementsByTagName("p"),l=a.length,s=[],c="",d=!1;for(l>0&&(i=a[0],r=parseInt(i.getAttribute("x"),10),n=parseInt(i.getAttribute("y"),10),s.push({x:r,y:n}),c="M"+r+" "+n),t=1;t<l;t++)i=a[t],r=parseInt(i.getAttribute("x"),10),n=parseInt(i.getAttribute("y"),10),s.push({x:r,y:n}),d?(c+=" M"+r+" "+n,d=!1):isNaN(r)?d=!0:c+=" L"+r+" "+n;o.baseSVGElement||o.createPath(o.config),o.loadXMLDraw(e),o.loadXMLFill(e),o.baseSVGElement.setAttribute("d",c),o.strPath=c,o.points=s},t.prototype.toJSON=function(){var e,r,i,o={},a=[];try{for(var l=n(this.points),s=l.next();!s.done;s=l.next())i=s.value,a.push({x:i.x.toFixed(1),y:i.y.toFixed(1)})}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}return this.addJSONDraw(o),this.addJSONFill(o),o.xtype=t.xtype,o.points=a,o},t.prototype.fromJSON=function(e){var t=this;if(e.points&&Array.isArray(e.points)){var r=e.points,n=r.length,i=void 0,o=[],a="",l=void 0,s=void 0,c=void 0,d=!1;for(n>0&&(c=r[0],l=parseInt(c.x,10),s=parseInt(c.y,10),o.push({x:l,y:s}),a="M"+l+" "+s),i=1;i<n;i++)c=r[i],l=parseInt(c.x,10),s=parseInt(c.y,10),o.push({x:l,y:s}),d?(a+=" M"+l+" "+s,d=!1):isNaN(l)?d=!0:a+=" L"+l+" "+s;t.baseSVGElement||t.createPath(t.config),t.loadJSONDraw(e),t.loadJSONFill(e),t.baseSVGElement.setAttribute("d",a),t.strPath=a,t.points=o}},t.xtype="freeDraw",t}(k);w.register(L.xtype,L);var C='<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 283.093 283.093" style="enable-background:new 0 0 283.093 283.093;" xml:space="preserve">\r\n<g>\r\n\t<path class="ea-button" d="M271.315,54.522L218.989,2.196c-2.93-2.928-7.678-2.928-10.607,0L78.274,132.303c-1.049,1.05-1.764,2.388-2.053,3.843\r\n\t\tl-12.964,65.29c-0.487,2.456,0.282,4.994,2.053,6.765c1.421,1.42,3.334,2.196,5.304,2.196c0.485,0,0.975-0.047,1.461-0.144\r\n\t\tl65.29-12.964c1.456-0.289,2.793-1.004,3.843-2.053L271.315,65.129C274.244,62.2,274.244,57.452,271.315,54.522z M83.182,178.114\r\n\t\tl6.776-34.127l39.566,39.566l-34.127,6.776L83.182,178.114z"/>\r\n\t<path class="ea-button" d="M205.912,227.066c-71.729-30.029-118.425,19.633-132.371,27.175c-17.827,9.641-42.941,20.97-48.779,1.358\r\n\t\tc-3.522-11.832,15.521-24.479,28.131-28.42c9.2-2.876,5.271-17.358-3.988-14.465c-19.582,6.121-42.948,22.616-38.851,45.839\r\n\t\tc3.044,17.256,24.67,32.995,66.368,11.114c30.308-15.902,50.897-48.84,114.733-31.783c20.969,5.602,37.92,19.27,45.178,40.057\r\n\t\tc3.168,9.07,17.662,5.169,14.465-3.988C243.062,251.799,227.411,236.067,205.912,227.066z"/>\r\n</g>\r\n</svg>\r\n',D=function(e){function t(t){var r=e.call(this)||this;return r.config=t,r.iconSVG=C,r.itemId="free-draw",r.title="Free Draw",r}return r(t,e),t.prototype.createAnnotator=function(e,t){var r=this.lastAnnotator;if(r)return r.stop(),this.element.className=this.element.className.replace(" "+e.ui+"-toolbar-item-pressed",""),this.lastAnnotator=null,r.setSelected(!1),null;this.element.className+=" "+e.ui+"-toolbar-item-pressed";var n=new L(e,t);return this.lastAnnotator=n,n},t.prototype.setPushed=function(e){var t=this.element,r=this.config.ui,n=t.className;this.pushed=e,e?-1===n.indexOf("toolbar-item-pressed")&&(t.className+=" "+r+"-toolbar-item-pressed"):t.className=n.replace(" "+r+"-toolbar-item-pressed",""),this.lastAnnotator=null},t}(c),M=function(e){function t(t,r){var n=e.call(this,t,r)||this;n.currentResizeIndex=-1,n.cx=0,n.cy=0,n.onResizeTouchStart=function(e){var t=e.changedTouches[0];n.onResizeDown(t)},n.onResizeMouseDown=function(e){n.onResizeDown(e)},n.onResizeMouseUp=function(e){n.currentResizeIndex=-1},n.onMouseUp=function(e){n.currentResizeIndex=-1,n.isDragging=!1},n.processMouseUp=function(){e.prototype.processMouseUp.call(n)};var i=n;return i.rx=50*t.sizePercentage,i.ry=50*t.sizePercentage,i.createEllipse(t),i.properties=[b.DRAW_PROPERTY,b.FILL_PROPERTY],n}return r(t,e),t.prototype.createEllipse=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","ellipse"),r=this;t.setAttribute("cx","0"),t.setAttribute("cy","0"),t.setAttribute("rx",r.rx.toString()),t.setAttribute("ry",r.ry.toString()),r.svgGroupElement.appendChild(t),r.baseSVGElement=t,r.resizeElements=new Array;for(var n=0;n<4;n++){var i=r.createResizeElement(e);r.resizeElements.push(i),r.addResizeEvents(i),r.svgGroupElement.appendChild(i)}r.arrangeResizeElements()},t.prototype.addResizeEvents=function(e){e.addEventListener("mousedown",this.onResizeMouseDown),e.addEventListener("mouseup",this.onResizeMouseUp),e.addEventListener("touchstart",this.onResizeTouchStart),e.addEventListener("touchend",this.onResizeMouseUp)},t.prototype.onResizeDown=function(e){var t=this,r=t.resizeElements.length,n=e.target;t.screenX=e.screenX,t.screenY=e.screenY,t.dragStartRx=t.rx,t.dragStartRy=t.ry;for(var i=0;i<r;i++)if(n==t.resizeElements[i]){t.currentResizeIndex=i,t.dragStartX=t.cx,t.dragStartY=t.cy;break}},t.prototype.moveBy=function(t,r,n){var i=this,o=i.currentResizeIndex;if(o>=0){var a=n.screenX-i.screenX,l=n.screenY-i.screenY;switch(o){case 0:i.rx=i.dragStartRx-a/2,i.ry=i.dragStartRy-l/2;break;case 1:i.rx=i.dragStartRx+a/2,i.ry=i.dragStartRy-l/2;break;case 2:i.rx=i.dragStartRx+a/2,i.ry=i.dragStartRy+l/2;break;case 3:i.rx=i.dragStartRx-a/2,i.ry=i.dragStartRy+l/2}i.cx=i.dragStartX+a/2,i.cy=i.dragStartY+l/2;var s=i.baseSVGElement;s.setAttribute("cx",i.cx.toString()),s.setAttribute("cy",i.cy.toString()),s.setAttribute("rx",i.rx.toString()),s.setAttribute("ry",i.ry.toString()),this.arrangeResizeElements()}else e.prototype.moveBy.call(this,t,r,n)},t.prototype.arrangeResizeElements=function(){var e=this.RESIZE_ELEM_SIZE/2;this.arrangeElement(this.resizeElements[0],this.cx-this.rx-e,this.cy-this.ry-e),this.arrangeElement(this.resizeElements[1],this.cx+this.rx,this.cy-this.ry-e),this.arrangeElement(this.resizeElements[2],this.cx+this.rx,this.cy+this.ry-e),this.arrangeElement(this.resizeElements[3],this.cx-this.rx-e,this.cy+this.ry-e)},t.prototype.arrangeElement=function(e,t,r){var n=e.transform.baseVal.getItem(0);n.setTranslate(t,r),e.transform.baseVal.replaceItem(n,0)},t.prototype.setDrawColor=function(e){this.baseSVGElement.style.stroke=e},t.prototype.setFillColor=function(e){if(0==this.fillStyle.fillType)this.baseSVGElement.style.fill=e;else{var t=this.fillPattern;t&&(t.style.stroke=e,t.style.fill=e)}},t.prototype.setFillType=function(e){var t=this;if(0==e)t.baseSVGElement.style.fill=t.fillStyle.color;else{var r=v.createFillPattern(t.config,e,t.fillPattern);r.style.stroke=t.fillStyle.color,r.style.fill=t.fillStyle.color,t.fillPattern=r,t.baseSVGElement.style.fill="url(#"+r.id+")"}},t.prototype.setSelected=function(t){if(this.selected!=t){e.prototype.setSelected.call(this,t);for(var r=0;r<4;r++)this.resizeElements[r].style.display=t?"":"none"}},t.prototype.containsPoint=function(e,t){var r=this,n=r.svgGroupElement.transform.baseVal.getItem(0).matrix,i=n.e,o=n.f,a=r.rx,l=r.ry,s=(e-(r.cx+i+a))/a,c=(t-(r.cy+o+l))/l;return s*s+c*c<1},t.prototype.intersects=function(e,t,r,n){var i=this,o=i.svgGroupElement.transform.baseVal.getItem(0).matrix,a=o.e,l=o.f,s=i.rx,c=i.ry,d=i.cx+a-s,p=i.cy+l-c,u=2*i.rx,h=2*i.ry;if(r<=0||n<=0)return!1;var g,f,m=(e-d)/u-.5,v=m+r/u,y=(t-p)/h-.5,w=y+n/h;return(g=m>0?m:v<0?v:0)*g+(f=y>0?y:w<0?w:0)*f<.25},t.prototype.setStrokeType=function(t){e.prototype._setStrokeType.call(this,this.baseSVGElement,t)},t.prototype.setStrokeWidth=function(t){e.prototype._setStrokeWidth.call(this,this.baseSVGElement,t)},t.prototype.getWidth=function(){return 2*this.rx},t.prototype.getHeight=function(){return 2*this.ry},t.prototype.toXML=function(){var e=document.createElementNS(null,t.xtype),r=this,n=r.svgGroupElement.transform.baseVal.getItem(0).matrix,i=n.e,o=n.f;return r.addDraw(e),r.addFill(e),e.setAttribute("cx",(r.cx+i).toString()),e.setAttribute("cy",(r.cy+o).toString()),e.setAttribute("rx",r.rx.toString()),e.setAttribute("ry",r.ry.toString()),e},t.prototype.fromXML=function(e){var t=this,r=function(e){var t=parseInt(e,10);return(isNaN(t)||t<0)&&(t=0),t},n=r(e.getAttribute("cx")),i=r(e.getAttribute("cy")),o=r(e.getAttribute("rx")),a=r(e.getAttribute("ry"));t.cx=n,t.cy=i,t.rx=o,t.ry=a,t.setCoordinates(),t.loadXMLDraw(e),t.loadXMLFill(e),t.arrangeResizeElements()},t.prototype.setCoordinates=function(){var e=this,t=e.baseSVGElement;t.setAttribute("cx",e.cx.toString()),t.setAttribute("cy",e.cy.toString()),t.setAttribute("rx",e.rx.toString()),t.setAttribute("ry",e.ry.toString())},t.prototype.toJSON=function(){var e=this,r=e.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f,o={xtype:t.xtype,cx:e.cx+n,cy:e.cy+i,rx:e.rx,ry:e.ry};return e.addJSONDraw(o),e.addJSONFill(o),o},t.prototype.fromJSON=function(e){var t=this;e.cx&&(t.cx=e.cx),e.cy&&(t.cy=e.cy),e.rx&&(t.rx=e.rx),e.ry&&(t.ry=e.ry),t.loadJSONDraw(e),t.loadJSONFill(e),t.setCoordinates(),t.arrangeResizeElements()},t.xtype="ellipse",t}(y);w.register(M.xtype,M);var T='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><ellipse class="ea-button" cx="15" cy="15" rx="13" ry="13"></ellipse></svg>',N=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=T,t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new M(e,t)},t}(s),I=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.resizeElements=[],n.currentResizeIndex=-1,n.x=0,n.y=0,n.onResizeTouchStart=function(e){var t=e.changedTouches[0];n.onResizeDown(t)},n.onResizeMouseDown=function(e){n.onResizeDown(e)},n.onResizeDown=function(e){var t=n,r=t.resizeElements.length,i=e.target,o=t.getPixelRatio();t.screenX=e.screenX/o,t.screenY=e.screenY/o,t.dragStartW=t.width,t.dragStartH=t.height,t.dragStartX=t.x,t.dragStartY=t.y;for(var a=0;a<r;a++)if(i==n.resizeElements[a]){n.currentResizeIndex=a;break}},n.onResizeMouseUp=function(e){n.currentResizeIndex=-1},n.onMouseUp=function(e){n.currentResizeIndex=-1,n.isDragging=!1},n.processMouseUp=function(){e.prototype.processMouseUp.call(n)},n.config=t,n.initElement(t),n.properties=[b.DRAW_PROPERTY,b.FILL_PROPERTY],n}return r(t,e),t.prototype.initElement=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","rect"),r=this;t.setAttribute("x","0"),t.setAttribute("y","0"),t.setAttribute("width",r.width.toString()),t.setAttribute("height",r.height.toString()),r.svgGroupElement.appendChild(t),r.baseSVGElement=t;for(var n=0;n<4;n++){var i=r.createResizeElement(e);r.resizeElements.push(i),r.addResizeEvents(i),r.svgGroupElement.appendChild(i)}r.arrangeResizeElements()},t.prototype.addResizeEvents=function(e){g.isMobileDevice()?(e.addEventListener("touchstart",this.onResizeTouchStart),e.addEventListener("touchend",this.onResizeMouseUp)):(e.addEventListener("mousedown",this.onResizeMouseDown),e.addEventListener("mouseup",this.onResizeMouseUp))},t.prototype.moveBy=function(t,r,n){var i=this,o=i.currentResizeIndex;if(o>=0){var a=i.getPixelRatio(),l=n.screenX/a-i.screenX,s=n.screenY/a-i.screenY;switch(o){case 0:i.width=i.dragStartW-l,i.height=i.dragStartH-s,i.x=i.dragStartX+l,i.y=i.dragStartY+s;break;case 1:i.y=i.dragStartY+s,i.width=i.dragStartW+l,i.height=i.dragStartH-s;break;case 2:i.width=i.dragStartW+l,i.height=i.dragStartH+s;break;case 3:i.x=i.dragStartX+l,i.width=i.dragStartW-l,i.height=i.dragStartH+s}i.baseSVGElement.setAttribute("x",i.x.toString()),i.baseSVGElement.setAttribute("y",i.y.toString()),i.baseSVGElement.setAttribute("width",i.width.toString()),i.baseSVGElement.setAttribute("height",i.height.toString()),i.arrangeResizeElements()}else e.prototype.moveBy.call(this,t,r,n)},t.prototype.arrangeResizeElements=function(){var e=this.RESIZE_ELEM_SIZE/2,t=this,r=t.x-e,n=t.x+t.width-e,i=t.y-e,o=t.y+t.height-e;t.arrangeElement(t.resizeElements[0],r,i),t.arrangeElement(t.resizeElements[1],n,i),t.arrangeElement(t.resizeElements[2],n,o),t.arrangeElement(t.resizeElements[3],r,o)},t.prototype.arrangeElement=function(e,t,r){var n=e.transform.baseVal.getItem(0);n.setTranslate(t,r),e.transform.baseVal.replaceItem(n,0)},t.prototype.setDrawColor=function(e){this.baseSVGElement.style.stroke=e},t.prototype.setFillColor=function(e){this.baseSVGElement.style.fill=e},t.prototype.setFillType=function(e){var t=this;if(0==e)t.baseSVGElement.style.fill=t.fillStyle.color;else{var r=v.createFillPattern(t.config,e,t.fillPattern);r.style.stroke=t.fillStyle.color,r.style.fill=t.fillStyle.color,t.fillPattern=r,t.baseSVGElement.style.fill="url(#"+r.id+")"}},t.prototype.setSelected=function(t){if(this.selected!=t){e.prototype.setSelected.call(this,t);for(var r=this.resizeElements.length,n=0;n<r;n++)this.resizeElements[n].style.display=t?"":"none"}},t.prototype.intersects=function(e,r,n,i){var o=this,a=o.svgGroupElement.transform.baseVal.getItem(0).matrix,l=a.e,s=a.f,c=o.x+l,d=o.y+s,p=o.width,u=o.height;return t.intersects(c,d,p,u,e,r,n,i)},t.intersects=function(e,t,r,n,i,o,a,l){return a>0&&l>0&&r>0&&n>0&&i<e+r&&i+a>e&&o<t+n&&o+l>t},t.prototype.containsPoint=function(e,t){var r=this,n=r.svgGroupElement.transform.baseVal.getItem(0).matrix,i=n.e,o=n.f,a=r.x+i,l=r.y+o,s=r.width,c=r.height;return s>0&&c>0&&e>=a&&e<a+s&&t>=l&&t<l+c},t.prototype.setStrokeType=function(t){e.prototype._setStrokeType.call(this,this.baseSVGElement,t)},t.prototype.setStrokeWidth=function(t){e.prototype._setStrokeWidth.call(this,this.baseSVGElement,t)},t.prototype.toXML=function(){var e=document.createElementNS(null,t.xtype);return this._toXML(e),e},t.prototype._toXML=function(e){var t=this,r=t.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f;t.addDraw(e),t.addFill(e),e.setAttribute("x",(t.x+n).toString()),e.setAttribute("y",(t.y+i).toString()),e.setAttribute("w",t.width.toString()),e.setAttribute("h",t.height.toString())},t.prototype.fromXML=function(e){var t=this,r=function(e){if(null===e)return 0;var t=parseInt(e,10);return isNaN(t)&&(t=0),t},n=r(e.getAttribute("x")),i=r(e.getAttribute("y")),o=r(e.getAttribute("w")),a=r(e.getAttribute("h"));t.x=n,t.y=i,t.width=o,t.height=a;var l=t.baseSVGElement;l.setAttribute("x",n.toString()),l.setAttribute("y",i.toString()),l.setAttribute("width",o.toString()),l.setAttribute("height",a.toString()),t.loadXMLDraw(e),t.loadXMLFill(e),t.resizeElements.length&&t.arrangeResizeElements()},t.prototype.toJSON=function(){var e=this,r=e.svgGroupElement.transform.baseVal.getItem(0).matrix,n=r.e,i=r.f,o={xtype:t.xtype,x:e.x+n,y:e.y+i,w:e.width,h:e.height};return e.addJSONDraw(o),e.addJSONFill(o),o},t.prototype.fromJSON=function(e){var t=this;e.x&&(t.x=e.x),e.y&&(t.y=e.y),e.w&&(t.width=e.w),e.h&&(t.height=e.h),t.loadJSONDraw(e),t.loadJSONFill(e),t.baseSVGElement.setAttribute("x",t.x.toString()),t.baseSVGElement.setAttribute("y",t.y.toString()),t.baseSVGElement.setAttribute("width",t.width.toString()),t.baseSVGElement.setAttribute("height",t.height.toString()),t.resizeElements.length&&t.arrangeResizeElements()},t.xtype="rect",t}(y);w.register(I.xtype,I);var O='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><rect class="ea-button" x="2" y="3" width="27" height="24"></rect></svg>',R=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=O,t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new I(e,t)},t}(s),z=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.initialized=!1,n.initArrow(t),n}return r(t,e),t.prototype.initArrow=function(e){var t=v.createArrowMarker(e,0,null);this.baseSVGElement.setAttribute("marker-end","url(#"+t[0].getAttribute("id")+")"),this.arrowEndHead=t[1]},t.prototype.setDrawStyle=function(t){var r=this,n=r.initialized,i=r.arrowEndHead;n||(r.arrowEndHead=null),e.prototype.setDrawStyle.call(this,t),n||(r.drawStyle.endArrow=1,r.arrowEndHead=i,r.baseSVGElement.setAttribute("marker-end","url(#"+i.parentNode.getAttribute("id")+")"),i.style.fill=t.color,i.style.stroke=t.color,r.initialized=!0)},t.xtype="arrow",t}(x);w.register(z.xtype,z);var B='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30"><defs><marker markerWidth="6" markerHeight="6" refX="5" refY="3" orient="auto" id="arrow-marker87667"><polygon points="0 0 6,3 0,6" style="fill:url(#easyAnnotatorBtnGradient) #447799;"></polygon></marker></defs><line class="ea-button" style="stroke:url(#easyAnnotatorBtnGradient) #447799;stroke-width:3;" marker-end="url(#arrow-marker87667)" y1="28" x2="29" y2="2"></line></svg>',V=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=B,t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new z(e,t)},t}(s),P=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.currentText="Text",n.lastTouchTime=0,n.INITIAL_HEIGHT=40,n.onTouchStart=function(e){var t=e.timeStamp,r=n;t-r.lastTouchTime<600?n.addEditor():r.lastTouchTime=t,e.preventDefault()},n.onTextClick=function(e){n.addEditor()},n.saveEditText=function(){var e=n;e.currentText=e.editorTextArea.value,e.setText(e.currentText),e.hideEditor()},n.hideEditor=function(){n.foreignObject.parentElement.removeChild(n.foreignObject)},n.width=80,n.height=n.INITIAL_HEIGHT,n.x=0,n.y=0,n.createText(t),n.properties=[b.FILL_PROPERTY,b.FONT_PROPERTY],n}return r(t,e),t.prototype.initElement=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","rect");t.classList.add(e.ui+"-text-sel-rect"),this.svgGroupElement.appendChild(t),this.selectedRect=t},t.prototype.createText=function(e){var t=this,r=document.createElementNS("http://www.w3.org/2000/svg","text");r.classList.add(e.ui+"-svg-text-element"),r.addEventListener("dblclick",t.onTextClick),r.addEventListener("touchstart",t.onTouchStart),t.svgGroupElement.appendChild(r),t.baseSVGElement=r,window.setTimeout((function(){t.setText(t.currentText)}),100)},t.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.selectedRect.style.display=t?"block":"none"},t.prototype.addEditor=function(){for(var e=this,t=e.editorTextArea,r=e.foreignObject,n=e.svgGroupElement.parentElement;"svg"!=n.nodeName.toLowerCase();)n=n.parentElement;if(r)r.parentElement||n.appendChild(r);else{var i=document;r=i.createElementNS("http://www.w3.org/2000/svg","foreignObject"),t=i.createElement("textarea"),r.appendChild(t),n.appendChild(r),e.editorTextArea=t,e.foreignObject=r;var o=i.createElement("div"),a=i.createElement("div"),l=i.createElement("div");o.classList.add(e.config.ui+"-text-ann-btn-container"),o.appendChild(l),o.appendChild(a),a.addEventListener("click",e.saveEditText),a.innerHTML='<svg viewBox="5 7 50 50" xmlns="http://www.w3.org/2000/svg"><path class="ea-button" d="m10.497 32.281c4.2095 3.8308 6.93 7.2788 11.433 15.27 9.789-24.709 23.193-31.053 21.493-32.147-3.4388-2.3075-20.169 17.034-22.192 19.586-2.4332-1.2882-10.733-5.791-10.733-2.7086z" fill="#333" fill-rule="evenodd" stroke="#333" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.875"/></svg>\n',l.addEventListener("click",e.hideEditor),l.innerHTML='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="-250 -250 1600 1600"><g><path d="M962.6,962.6c-36.5,36.5-95.7,36.5-132.2,0L500,632.2L169.6,962.6c-36.5,36.5-95.7,36.5-132.2,0c-36.5-36.5-36.5-95.7,0-132.2L367.8,500L37.4,169.6c-36.5-36.5-36.5-95.7,0-132.2s95.7-36.5,132.2,0L500,367.8L830.4,37.4c36.5-36.5,95.7-36.5,132.2,0c36.5,36.5,36.5,95.7,0,132.2L632.2,500l330.4,330.4C999,866.9,999,926,962.6,962.6z"/></g></svg>',r.appendChild(o)}t.innerHTML=this.currentText;var s=n.getBoundingClientRect(),c=s.width.toString();r.setAttribute("width",c),r.setAttribute("height",s.height.toString()),t.style.width=c+"px",t.style.height=s.height-40+"px",r.style.display="block",t.focus(),t.select()},t.prototype.setFillStyle=function(t){e.prototype.setFillStyle.call(this,t),this.baseSVGElement.childNodes.forEach((function(e){e.style.fill=t.color}))},t.prototype.setText=function(e){for(var t,r=e.split(/\n/),n=r.length,i=this.baseSVGElement;i.lastChild;)i.removeChild(i.lastChild);for(t=0;t<n;t++){var o=document.createElementNS("http://www.w3.org/2000/svg","tspan");o.setAttribute("x","0"),o.setAttribute("dy","1.2em"),o.style.fill=this.fillStyle.color,o.innerHTML=r[t],i.appendChild(o)}this.setSelRectSize()},t.prototype.setSelRectSize=function(){var e=this.baseSVGElement.getBBox(),t=this.selectedRect;t.setAttribute("x",e.x.toString()),t.setAttribute("y",e.y.toString()),t.setAttribute("width",e.width.toString()),t.setAttribute("height",e.height.toString())},t.prototype.setDrawStyle=function(e){},t.prototype.setStrokeWidth=function(e){},t.prototype.setFont=function(e){var t=this.baseSVGElement;t.style.fontFamily=e.name,t.style.fontSize=e.size+"px",t.style.fontStyle=e.italic?"italic":"normal",t.style.fontWeight=e.bold?"bold":"normal",this.setSelRectSize()},t.prototype.toXML=function(){var e=document.createElementNS(null,t.xtype);this._toXML(e),e.setAttribute("t",this.currentText);var r=this.baseSVGElement.style;return e.setAttribute("fn",r.fontFamily),e.setAttribute("fs",parseInt(r.fontSize,10)+""),e.setAttribute("fi","italic"==r.fontStyle?"1":"0"),e.setAttribute("fb","bold"==r.fontWeight?"1":"0"),e},t.prototype.fromXML=function(t){var r=this;r.width=r.getXMLNumber(t,"w"),r.height=r.getXMLNumber(t,"h"),r.currentText=t.getAttribute("t")||"Text",r.loadXMLDraw(t),r.loadXMLFill(t);var n=parseInt(t.getAttribute("fs"),10);isNaN(n)&&(n=24);var i={name:t.getAttribute("fn")||"Arial",italic:"1"===t.getAttribute("fi"),bold:"1"===t.getAttribute("fb"),size:n};setTimeout((function(){r.setFont(i)}),50),e.prototype.moveBy.call(this,r.getXMLNumber(t,"x"),r.getXMLNumber(t,"y"),null)},t.prototype.toJSON=function(){var r=e.prototype.toJSON.call(this);r.xtype=t.xtype,delete r.w,delete r.h,r.t=this.currentText;var n=this.baseSVGElement.style;return r.fn=n.fontFamily,r.fs=parseInt(n.fontSize,10),r.fi="italic"==n.fontStyle?1:0,r.fb="bold"==n.fontWeight?1:0,r},t.prototype.fromJSON=function(t){var r=this;if(r.x=0,r.y=0,t.w&&(r.width=t.w),t.h&&(r.height=t.h),r.loadJSONDraw(t),r.loadJSONFill(t),t.t&&(r.currentText=t.t),t.fn){var n={name:t.fn||"Arial",italic:!!t.fi,bold:!!t.fb,size:t.fs||24};setTimeout((function(){r.setFont(n)}),50)}e.prototype.moveBy.call(this,t.x,t.y,null)},t.prototype.clean=function(){if(this.foreignObject){for(var e=this.svgGroupElement.parentElement;"svg"!=e.nodeName.toLowerCase();)e=e.parentElement;e.removeChild(this.foreignObject)}},t.xtype="text",t}(I);w.register(P.xtype,P);var H='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\r\n\t viewBox="0 0 25.531 25.531" style="enable-background:new 0 0 25.531 25.531;" xml:space="preserve">\r\n<g>\r\n\t<g>\r\n\t\t<path class="ea-button" d="M25.198,6.273c-0.014,0.23-0.045,0.389-0.087,0.467c-0.045,0.084-0.176,0.145-0.392,0.183\r\n\t\t\tc-0.469,0.104-0.781-0.074-0.935-0.533C23.239,4.7,22.59,3.578,21.84,3.016c-1.041-0.773-2.862-1.161-5.469-1.161\r\n\t\t\tc-1.054,0-1.633,0.115-1.734,0.343c-0.036,0.075-0.057,0.184-0.057,0.324v18.999c0,0.812,0.188,1.383,0.571,1.709\r\n\t\t\tc0.382,0.32,1.069,0.731,2.201,0.999c0.483,0.103,0.97,0.2,1.034,0.239c0.46,0,0.504,1.057-0.376,1.057\r\n\t\t\tc-0.025,0.016-10.375-0.008-10.375-0.008s-0.723-0.439-0.074-1.023c0.271-0.121,0.767-0.343,0.767-0.343s1.83-0.614,2.211-1.009\r\n\t\t\tc0.434-0.445,0.648-1.164,0.648-2.154V2.521c0-0.369-0.229-0.585-0.687-0.647c-0.049-0.015-0.425-0.02-1.122-0.02\r\n\t\t\tc-2.415,0-4.191,0.418-5.338,1.259C3.176,3.735,2.411,4.877,1.737,6.545C1.52,7.065,1.22,7.234,0.84,7.058\r\n\t\t\tC0.408,6.957,0.251,6.719,0.363,6.353c0.445-1.374,0.668-3.31,0.668-5.814c0-0.292,0.387-0.586,1.163-0.533L23.56,0.064\r\n\t\t\tc0.709-0.104,1.096,0.012,1.16,0.343C25.076,2.096,25.234,4.052,25.198,6.273z"/>\r\n\t</g>\r\n</g>\r\n</svg>\r\n',G=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=H,t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new P(e,t)},t}(s),F=function(e){function t(r,n){var i=e.call(this,r,n)||this;return i.direction=t.DIRECTION_BOTTOM,i.onResizeTouchStart=function(e){var t=e.changedTouches[0];i.onResizePress(t)},i.onResizeMouseDown=function(e){i.onResizePress(e)},i.addResizeElements(r),i}return r(t,e),t.prototype.initElement=function(e){var t=this,r=document;t.width=200*e.sizePercentage,t.height=150*e.sizePercentage,t.bottom=.65*t.height,t.right=t.width;var n=r.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("class",e.ui+"-annotator-callout-shadow");var i=r.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("class",e.ui+"-annotator-callout"),t.svgGroupElement.appendChild(n),t.svgGroupElement.appendChild(i),t.shadowPathElement=n,t.baseSVGElement=i;var o=r.createElementNS("http://www.w3.org/2000/svg","filter");o.id="calloutFilter258",o.innerHTML='<feGaussianBlur stdDeviation="6.5873096"/>',v.addToDefs(e,o),t.calloutHeadX=.1127*t.width,t.calloutHeadY=.9725*t.height,t.resize()},t.prototype.resize=function(){var e=this,r=e.x,n=e.y,i=e.right,o=e.bottom,a=Math.min(10,Math.min(.08*i,.08*o)),l=.2*a,s=.6*a,c=n+a,d=i-a,p="C "+(r+a/10)+","+(n+s)+" "+(r+l)+","+(n+l)+" "+(r+a)+","+n,u="C "+(i-s)+","+(n+.1*a)+" "+(i-l)+","+(n+l)+" "+(i-.1*a)+","+(n+s),h="C "+(i-a/10)+","+(o-s)+" "+(i-l)+","+(o-l)+" "+d+","+o,g="C "+(r+.9*a)+","+(o-.1*a)+" "+(r+l)+","+(o-l)+" "+(r+.1*a)+","+(o-.9*a),f=null;switch(e.direction){case t.DIRECTION_TOP:f="M "+r+","+c+" "+p+" L "+(r+.418*(i-r))+","+n+" L "+e.calloutHeadX+","+e.calloutHeadY+" L "+(r+.574*(i-r))+","+n+" L "+d+","+n+" "+u+" L "+i+","+(o-a)+" "+h+" L "+(r+a)+","+o+" "+g+" L "+r+","+c+" z";break;case t.DIRECTION_RIGHT:f="M "+r+","+c+" "+p+" L "+d+","+n+" "+u+" L "+i+","+(n+.418*(o-n))+" L "+e.calloutHeadX+","+e.calloutHeadY+" "+i+","+(n+.574*(o-n))+" L "+i+","+(o-a)+" "+h+" L "+(r+a)+","+o+" "+g+" L "+r+","+c+" z";break;case t.DIRECTION_BOTTOM:f="M "+r+","+c+" "+p+" L "+d+","+n+" "+u+" L "+i+","+(o-a)+" "+h+" L "+(r+.5737*(i-r))+","+o+" L "+e.calloutHeadX+","+e.calloutHeadY+" L "+(r+.418*(i-r))+","+o+" L "+(r+a)+","+o+" "+g+" L "+r+","+c+" z";break;case t.DIRECTION_LEFT:f="M "+r+","+c+" "+p+" L "+d+","+n+" "+u+" L "+i+","+(o-a)+" "+h+" L "+(r+a)+","+o+" "+g+" L "+r+","+(n+.574*(o-n))+" L "+e.calloutHeadX+","+e.calloutHeadY+" "+r+","+(n+.418*(o-n))+" L "+r+","+c+" z"}f&&(e.baseSVGElement.setAttribute("d",f),e.shadowPathElement.setAttribute("d",f)),e.points?e.points.length=0:e.points=[];var m=r+i/2,v=n+o/2;e.points.push(new A(m,v)),e.points.push(new A(2e4,e.getNextPoint(m,v,r+i,n,2e4))),e.points.push(new A(2e4,e.getNextPoint(m,v,r+i,n+o,2e4))),e.points.push(new A(-2e4,e.getNextPoint(m,v,r,n+o,-2e4))),e.points.push(new A(-2e4,e.getNextPoint(m,v,r,n,-2e4)))},t.prototype.getNextPoint=function(e,t,r,n,i){return(n-t)/(r-e)*(i-e)+t},t.prototype.addResizeElements=function(e){for(var t=0;t<5;t++){var r=this.createResizeElement(e);this.resizeElements.push(r),this.addResizeEvents(r),this.svgGroupElement.appendChild(r)}this.arrangeResizeElements()},t.prototype.onResizePress=function(e){var t=this,r=e.target,n=t.resizeElements.length;t.screenX=e.screenX,t.screenY=e.screenY,t.dragStartW=t.right,t.dragStartH=t.bottom,t.dragStartX=t.x,t.dragStartY=t.y;for(var i=0;i<n;i++)if(r==t.resizeElements[i]){t.currentResizeIndex=i,t.calloutDragX=t.calloutHeadX,t.calloutDragY=t.calloutHeadY;break}},t.prototype.arrangeResizeElements=function(){var e=this,t=e.RESIZE_ELEM_SIZE/2,r=e.x-t,n=e.right-t,i=e.y-t,o=e.bottom-t;e.arrangeElement(e.resizeElements[0],r,i),e.arrangeElement(e.resizeElements[1],n,i),e.arrangeElement(e.resizeElements[2],n,o),e.arrangeElement(e.resizeElements[3],r,o),e.arrangeElement(e.resizeElements[4],e.calloutHeadX,e.calloutHeadY)},t.prototype.moveBy=function(r,n,i){var o=this,a=o.currentResizeIndex;if(a>=0){var l=i.screenX-o.screenX,s=i.screenY-o.screenY;switch(a){case 0:o.x=o.dragStartX+l,o.y=o.dragStartY+s;break;case 1:o.y=o.dragStartY+s,o.right=o.dragStartW+l;break;case 2:o.right=o.dragStartW+l,o.bottom=o.dragStartH+s;break;case 3:o.x=o.dragStartX+l,o.bottom=o.dragStartH+s;break;case 4:o.calloutHeadX=o.calloutDragX+l,o.calloutHeadY=o.calloutDragY+s;var c=o.points[0],d=new A(o.calloutHeadX,o.calloutHeadY);o.pointInTriangle(d,c,o.points[1],o.points[2])?o.direction=t.DIRECTION_RIGHT:o.pointInTriangle(d,c,o.points[2],o.points[3])?o.direction=t.DIRECTION_BOTTOM:o.pointInTriangle(d,c,o.points[3],o.points[4])?o.direction=t.DIRECTION_LEFT:o.pointInTriangle(d,c,o.points[4],o.points[1])&&(o.direction=t.DIRECTION_TOP)}o.baseSVGElement.setAttribute("x",o.x.toString()),o.baseSVGElement.setAttribute("y",o.y.toString())}else e.prototype.moveBy.call(this,r,n,i);o.arrangeResizeElements(),o.resize()},t.prototype.sign=function(e,t,r){return(e.x-r.x)*(t.y-r.y)-(t.x-r.x)*(e.y-r.y)},t.prototype.pointInTriangle=function(e,t,r,n){var i,o,a;return i=this.sign(e,t,r),o=this.sign(e,r,n),a=this.sign(e,n,t),!((i<0||o<0||a<0)&&(i>0||o>0||a>0))},t.prototype.setDrawColor=function(e){this.baseSVGElement.style.stroke=e},t.prototype.setFillColor=function(e){this.baseSVGElement.style.fill=e},t.prototype.toJSON=function(){var r=this,n=e.prototype.toJSON.call(this);return n.xtype=t.xtype,n.dx=n.x,n.dy=n.y,n.x=r.x,n.y=r.y,n.r=r.right,n.b=r.bottom,n.cx=r.calloutHeadX,n.cy=r.calloutHeadY,n.d=r.direction,n},t.prototype.fromJSON=function(t){var r=this;e.prototype.fromJSON.call(this,t),r.right=t.r,r.bottom=t.b,r.calloutHeadX=t.cx,r.calloutHeadY=t.cy,r.direction=t.d,r.moveBy(t.dx-t.x,t.dy-t.y,null),r.resize()},t.prototype.toXML=function(){var e=document.createElementNS(null,t.xtype),r=this;return r._toXML(e),e.setAttribute("dx",e.getAttribute("x")),e.setAttribute("dy",e.getAttribute("y")),e.setAttribute("x",r.x.toString()),e.setAttribute("y",r.y.toString()),e.setAttribute("r",r.right.toString()),e.setAttribute("b",r.bottom.toString()),e.setAttribute("cx",r.calloutHeadX.toString()),e.setAttribute("cy",r.calloutHeadY.toString()),e.setAttribute("d",r.direction.toString()),e},t.prototype.fromXML=function(t){e.prototype.fromXML.call(this,t);var r=this;r.right=r.getXMLNumber(t,"r"),r.bottom=r.getXMLNumber(t,"b"),r.calloutHeadX=r.getXMLNumber(t,"cx"),r.calloutHeadY=r.getXMLNumber(t,"cy"),r.direction=r.getXMLNumber(t,"d"),r.moveBy(r.getXMLNumber(t,"dx")-r.x,r.getXMLNumber(t,"dy")-r.y,null),r.resize()},t.DIRECTION_TOP=1,t.DIRECTION_RIGHT=2,t.DIRECTION_BOTTOM=3,t.DIRECTION_LEFT=4,t.xtype="callout",t}(I);w.register(F.xtype,F);var X='<svg\n   viewBox="0 0 488 473"\n   aria-hidden="true" focusable="false" data-prefix="fas" data-icon="palette" \n   xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg">\n  <defs><filter id="filter3746"><feGaussianBlur stdDeviation="6.5873096"/></filter></defs>\n  <path class="ea-button"\n     d="M 38,44 C 38,44 488,43 486,43 C 485,43 485,319 485,319 L 296,319 L 71,473 L 220,321 L 38,323 L 38,44 z"\n     style="fill:#000000;fill-opacity:0.5;fill-rule:evenodd;stroke:none;stroke-width:2.5;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;filter:url(#filter3746)" />\n  <path class="ea-button"\n     d="M 22,31 C 22,31 471,30 470,30 C 469,30 469,306 469,306 L 280,306 L 55,460 L 204,308 L 22,310 L 22,31 z"\n     style="fill-rule:evenodd;stroke-linecap:butt;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1" />\n</svg>',_=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=X,t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new F(e,t)},t}(s),W=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.blur="0",n.opacity="1",n.onFileUpload=function(e){var t=new FileReader,r=n;if(r.uploadInput.files.length){r.createImageElement();var i=r.imageSVGElement,o=r.uploadInput.files[0];if(o.name&&!o.name.match(/.png$|.jpg$|.jpeg$|.gif$|.bmp$/i))return r.baseSVGElement.classList.add("shake"),window.setTimeout((function(){r.baseSVGElement.classList.remove("shake")}),1500),!1;t.onloadend=function(){i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.result.toString())},r.svgGroupElement.style.zIndex="0",t.readAsDataURL(o);var a=r.svgGroupElement;a.removeChild(r.foreignObject),a.insertBefore(i,r.baseSVGElement),r.foreignObject=null}},n.properties=[b.BLUR_PROPERTY],n.attachUploadInput(),n}return r(t,e),t.prototype.attachUploadInput=function(){var e=document.createElement("input"),t=document.createElementNS("http://www.w3.org/2000/svg","foreignObject"),r=this;t.innerHTML='<div style="height: 100%;display:flex;position:absolute;width:100%;">                <svg style="width:100%;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 165 35">                    <text style="fill:black;" dy="1.5em">Click here or drag image</text>                </svg></div>',t.appendChild(e),e.setAttribute("type","file"),e.className="image-uploader",r.svgGroupElement.appendChild(t),t.setAttribute("width",r.width.toString()),t.setAttribute("height",r.height.toString()),t.addEventListener("change",r.onFileUpload),r.foreignObject=t,r.uploadInput=e},t.prototype.createImageElement=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","image"),t=this;e.setAttribute("x",t.x.toString()),e.setAttribute("y",t.y.toString()),e.setAttribute("width",t.width.toString()),e.setAttribute("height",t.height.toString()),e.setAttribute("draggable","false"),t.imageSVGElement=e},t.prototype.arrangeResizeElements=function(){e.prototype.arrangeResizeElements.call(this);var t=this,r=t.foreignObject,n=t.imageSVGElement;n?(n.setAttribute("x",t.x.toString()),n.setAttribute("y",t.y.toString()),n.setAttribute("width",t.width.toString()),n.setAttribute("height",t.height.toString())):r&&(r.setAttribute("x",t.x.toString()),r.setAttribute("y",t.y.toString()),r.setAttribute("width",t.width.toString()),r.setAttribute("height",t.height.toString()))},t.prototype.setBlur=function(e){var t=this.imageSVGElement;this.blur=e.toString(),t&&(t.style.filter="blur("+e+"px)")},t.prototype.getBlur=function(){return this.blur},t.prototype.setOpacity=function(e){var t=this.imageSVGElement;this.opacity=e.toString(),t&&(t.style.opacity=this.opacity)},t.prototype.getOpacity=function(){return this.opacity},t.prototype.setDrawColor=function(e){this.baseSVGElement.style.stroke="transparent"},t.prototype.setFillColor=function(e){this.baseSVGElement.style.fill="transparent"},t.prototype.setSelected=function(t){e.prototype.setSelected.call(this,t),this.baseSVGElement.style.stroke=t?"#000":"transparent"},t.prototype.toXML=function(){var e=document.createElementNS(null,t.xtype);return e.setAttribute("i",this.imageSVGElement.getAttributeNS("http://www.w3.org/1999/xlink","href")),e.setAttribute("o",this.opacity),e.setAttribute("b",this.blur),this._toXML(e),e},t.prototype.fromXML=function(t){e.prototype.fromXML.call(this,t);var r=t.getAttribute("i"),n=this,i=n.svgGroupElement;if(i.removeChild(n.foreignObject),r){n.createImageElement();var o=n.imageSVGElement;i.insertBefore(o,n.baseSVGElement),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r)}if(r=t.getAttribute("o")){var a=parseFloat(r);a>=0&&a<=1&&n.setOpacity(a)}r=t.getAttribute("b");var l=parseFloat(r);l>=0&&n.setBlur(l)},t.prototype.toJSON=function(){var r=e.prototype.toJSON.call(this);return r.xtype=t.xtype,r.i=this.imageSVGElement.getAttributeNS("http://www.w3.org/1999/xlink","href"),r.o=this.opacity,r.b=this.blur,r},t.prototype.fromJSON=function(t){var r=this,n=r.svgGroupElement;if(t.i){e.prototype.fromJSON.call(this,t),n.removeChild(r.foreignObject),r.createImageElement();var i=r.imageSVGElement;n.insertBefore(i,r.baseSVGElement),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.i),r.setOpacity(t.o),r.setBlur(t.b)}},t.xtype="image",t}(I);w.register(W.xtype,W);var Y='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"></path></svg>',U=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=Y,t.title="Add Picture",t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new W(e,t)},t}(s),J=function(e){function t(r,n){var i=e.call(this,r,n)||this;i.blur="2";var o=i.baseSVGElement,a=document.createElementNS("http://www.w3.org/2000/svg","filter"),l=r.annotatorIdx+"_"+t.BLURING_ID,s="bluringFilter"+l;o.classList.add("blur-rect"),o.setAttribute("filter","url(#"+s+")"),a.setAttribute("id",s),a.setAttribute("filterUnits","userSpaceOnUse"),a.setAttribute("width","110%"),a.setAttribute("height","110%"),a.innerHTML='<feGaussianBlur stdDeviation="2"/>',v.addToDefs(r,a);var c,d,p=document.createElementNS("http://www.w3.org/2000/svg","pattern"),u=v.getDefs(r).getElementsByTagName("pattern"),h=u.length;for(s="bluringPattern"+l,p.id=s,c=0;c<h;c++)if((d=u[c]).id=="mainFillPattern"+r.annotatorIdx){p.innerHTML=d.innerHTML,p.setAttribute("patternUnits","userSpaceOnUse"),p.setAttribute("width",d.getAttribute("width")),p.setAttribute("height",d.getAttribute("height"));break}return v.addToDefs(r,p),t.BLURING_ID++,o.setAttribute("fill","url(#"+s+")"),i.bluringFilter=a,i.imagePattern=p,i.properties=[b.BLUR_PROPERTY],i}return r(t,e),t.prototype.moveBy=function(t,r,n){e.prototype.moveBy.call(this,t,r,n);var i=this,o=i.bluringFilter,a=i.imagePattern;o.setAttribute("x",i.x.toString()),o.setAttribute("y",i.y.toString());var l=i.svgGroupElement.transform.baseVal.getItem(0).matrix;a.setAttribute("x",(-l.e).toString()),a.setAttribute("y",(-l.f).toString())},t.prototype.setDrawStyle=function(e){},t.prototype.setFillStyle=function(e){},t.prototype.setBlur=function(e){this.blur=e.toString(),this.bluringFilter.getElementsByTagName("feGaussianBlur")[0].setAttribute("stdDeviation",this.blur)},t.prototype.getBlur=function(){return this.blur},t.prototype.clean=function(){var e=this,t=v.getDefs(e.config);e.bluringFilter&&t.removeChild(e.bluringFilter),e.imagePattern&&t.removeChild(e.imagePattern)},t.prototype.isOnTop=function(){return!0},t.prototype.toXML=function(){var r=document.createElementNS(null,t.xtype);return e.prototype._toXML.call(this,r),r.setAttribute("b",this.blur),r},t.prototype.fromXML=function(t){e.prototype.fromXML.call(this,t);var r=parseFloat(t.getAttribute("b"));(isNaN(r)||r<0||r>200/15)&&(r=0),this.blur=r.toString(),this.bluringFilter.getElementsByTagName("feGaussianBlur")[0].setAttribute("stdDeviation",this.blur)},t.prototype.toJSON=function(){var r=e.prototype.toJSON.call(this);return r.xtype=t.xtype,r.b=this.blur,r},t.prototype.fromJSON=function(t){if(e.prototype.fromJSON.call(this,t),t.b){var r=parseFloat(t.b);(isNaN(r)||r<0||r>200/15)&&(r=0),this.blur=r.toString()}},t.xtype="blur",t.BLURING_ID=1,t}(I);w.register(J.xtype,J);var j,Z='<svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="image" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\r\n  <defs>\r\n    <filter id="bluring" width="60%" x="40%">\r\n      <feGaussianBlur stdDeviation="50" filterUnits="objectBoundingBox"/>\r\n    </filter>\r\n  </defs>\r\n<path class="ea-button" filter="url(#bluring)" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"></path>\r\n<path class="ea-button" d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z"></path>\r\n</svg>',K=function(e){function t(){var t=e.call(this)||this;return t.iconSVG=Z,t.title="Blur Image",t}return r(t,e),t.prototype.createAnnotator=function(e,t){return new J(e,t)},t}(s),q=function(e){function t(t,r,n){var i=e.call(this,t,r,null,n)||this;return i.toolbarItemClickHandler=function(e,t){var r=t,n=i;r.isEnabled()&&r.invoke(n.config,n.parent.getSelectedItems())},i.config=t,i.itemClickHandler=i.toolbarItemClickHandler,i}return r(t,e),t.prototype.getUIElement=function(t,r){var n=this,i=e.prototype.getUIElement.call(this,t,r);return i.onclick=function(e){e.stopPropagation(),f.getOpenDialog()&&f.getOpenDialog().hide(),n.itemClickHandler.call(n,e,r)},i},t.prototype.setSelectedItems=function(e){var t,r;try{for(var i=n(this.items),o=i.next();!o.done;o=i.next()){var a=o.value;a.setEnabled(a.canHandle(e))}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},t}(m),$=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.enabled=!0,t}return r(t,e),t.prototype.canHandle=function(e){var t,r,i=this.xtype;try{for(var o=n(e),a=o.next();!a.done;a=o.next())if(a.value.getProperties().indexOf(i)>=0)return!0}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return!1},t.prototype.setEnabled=function(e){e!=this.enabled&&(this.enabled=e,e?this.element.classList.remove("btn-disabled"):this.element.classList.add("btn-disabled"))},t.prototype.isEnabled=function(){return this.enabled},t}(l),Q=-1e4,ee=function(){function e(e,t,r,i){var o,a,l,s,c=this;this.editable=!1,this.multiOptions=!1,this.mouseOverTimeout=0,this.subDropDownVisible=!1,this.onSubOptionsOver=function(e){var t=c;t.mouseOverTimeout&&(window.clearTimeout(t.mouseOverTimeout),t.mouseOverTimeout=0)},this.onOptionEvent=function(e){var t,r=e.target,n="touchend"==e.type,i="mouseover"==e.type||n,o=c;for(e.stopPropagation();r.className.indexOf("option")<0;)r=r.parentElement;if("1"===r.getAttribute("hasSubDropdDown")){if(o.subDropDownVisible=!0,t=r.getElementsByClassName("subdrop-down")[0],g.isPhone())return void window.setTimeout((function(){t.style.display="",t.classList.add("mobile-show-elem")}),300);if(!i)return void(o.mouseOverTimeout=window.setTimeout((function(){t.style.display="none"}),500));var a=o.mouseOverTimeout;if(a||n){a&&(window.clearTimeout(a),o.mouseOverTimeout=0);for(var l=r.parentElement.firstChild,s=void 0;l;)l!=r&&(s=l.getElementsByClassName("subdrop-down")).length&&(s[0].style.display="none"),l=l.nextSibling}t.style.display=i?"inline-block":"none"}else o.multiOptions&&o.removeMobileCls()},this.checkContainer=function(){for(var e=c,t=e.container.parentElement,r=document.body;t;){if(t==r)return;t=t.parentElement}e.subDropDownVisible=!1,e.removeMobileCls(),e.intervalID>0&&(window.clearInterval(e.intervalID),e.intervalID=0),e.clearListeners()},this.onBackButton=function(e){var t=c;t.subDropDownVisible?(t.removeMobileCls(null,"mobile-hide-elem"),window.setTimeout((function(){t.removeMobileCls("mobile-hide-elem")}),1e3)):(g.isPhone()&&t.optionsContainer.parentElement.removeChild(t.optionsContainer),t.clearListeners())},this.clearListeners=function(){g.isMobileDevice()?window.removeEventListener("touchstart",c.hideDropDown,!1):window.removeEventListener("click",c.hideDropDown,!1)},this.onDropDownClick=function(e){var t=c,r=document.body,n=t.optionsContainer;n.parentElement||(g.isPhone()?(r.appendChild(n),r.style.overflow="hidden"):t.container.appendChild(n)),e.stopPropagation(),n.style.display="block";var i=n.parentElement.getBoundingClientRect(),o=n.getBoundingClientRect();i.top+o.height>window.innerHeight?n.style.top=-(o.height+i.height)+"px":n.style.top="0",t.intervalID=window.setInterval(t.checkContainer,1e3),window.setTimeout((function(e){g.isMobileDevice()?window.addEventListener("touchstart",e.hideDropDown,{passive:!1}):window.addEventListener("click",e.hideDropDown,!1)}),500,t)},this.closeDropDown=function(e){e.preventDefault();var t=c;t.optionsContainer.parentElement.removeChild(t.optionsContainer),t.clearListeners()},this.hideDropDown=function(e){for(var t=c,r=t.optionsContainer,n=e?e.target:null,i=t.intervalID;n;){if(n==r)return;n=n.parentElement}i>0&&(window.clearInterval(i),t.intervalID=0),r.parentElement&&r.parentElement.removeChild(r),t.clearListeners()},this.selectOption=function(e){var t=c;e.preventDefault(),e.stopPropagation(),g.isPhone()&&t.optionsContainer.parentElement&&t.optionsContainer.parentElement.removeChild(t.optionsContainer);for(var r=e.target;!r.getAttribute("optIndex");)r=r.parentElement;for(var n,i,o=r.getAttribute("optValue"),a=r.parentElement.childNodes,l=a.length,s=r.getElementsByTagName("div"),d=r.parentElement;d&&d.className.indexOf("subdrop-down")<0;)d=d.parentElement;if(e.detail!=Q&&d&&(d.style.display="none"),t.multiOptions){for(n=0;n<l;n++)a[n]!=r&&(i=a[n].getElementsByClassName("checked")).length&&(i[0].className="");s[s.length-1].className="checked"}t.selectedIndex=parseInt(r.getAttribute("optIndex"),10),t.multiOptions||(t.editable?t.valueDiv.firstChild.value=r.innerHTML:t.valueDiv.innerHTML=r.innerHTML),t.onchange&&t.onchange(t.selectedIndex,o,t.multiOptions?parseInt(r.parentElement.getAttribute("subIndex"),10):0),t.onclose&&t.onclose(),e.detail!=Q&&(t.hideDropDown(null),window.clearInterval(t.intervalID),t.intervalID=0)};var d=document,p=d.createElement("div"),u=d.createElement("div"),h=g.isMobileDevice(),f=g.isPhone(),m=0,v=this;p.className=e.ui+"-drop-down"+(r?" "+r:""),u.className="options-container",f&&(u.classList.add("mobile-dropdown-container"),u.classList.add(e.ui+"-mobile-dropdown-container"),u.addEventListener("touchmove",(function(e){e.preventDefault()}))),i||(i=""),i+=" value",p.innerHTML='<div class="body"><div class="'+i+'"></div><div class="arrow"></div></div>';try{for(var y=n(t),w=y.next();!w.done;w=y.next()){var b=w.value;if(Array.isArray(b)){if(this.multiOptions=!0,b.length>0){var x;(x=d.createElement("div")).setAttribute("optIndex",m.toString()),x.setAttribute("hasSubDropdDown","1"),x.className="option",h?x.addEventListener("touchend",v.onOptionEvent,{passive:!1}):(x.addEventListener("mouseover",v.onOptionEvent),x.addEventListener("mouseout",v.onOptionEvent)),x.innerHTML='<div class="sub-item">'+b[0]+'<div class="right-arrow"></div></div>',u.appendChild(x);var S=d.createElement("div");S.className="subdrop-down",f&&S.classList.add("mobile-sub-dropdown"),S.setAttribute("subIndex",m.toString()),S.addEventListener("mouseover",v.onSubOptionsOver);var E=!0,k=0;try{for(var A=(l=void 0,n(b)),L=A.next();!L.done;L=A.next()){var C=L.value;if(E)E=!1;else{var D=d.createElement("div");D.setAttribute("optIndex",k.toString()),D.setAttribute("optValue",C),D.className="option",f&&D.classList.add("mobile-sub-option"),D.innerHTML='<div class="padding"></div>'+C+'<div class=""></div>',h?D.addEventListener("touchend",v.selectOption,{passive:!1}):D.addEventListener("click",v.selectOption,!1),S.appendChild(D),k++}}}catch(e){l={error:e}}finally{try{L&&!L.done&&(s=A.return)&&s.call(A)}finally{if(l)throw l.error}}x.firstChild.appendChild(S)}}else(x=d.createElement("div")).setAttribute("optIndex",m.toString()),x.className="option",x.innerHTML=b,x.setAttribute("optValue",b),h?x.addEventListener("touchend",v.selectOption,{passive:!1}):x.addEventListener("click",v.selectOption,!1),u.appendChild(x);m++}}catch(e){o={error:e}}finally{try{w&&!w.done&&(a=y.return)&&a.call(y)}finally{if(o)throw o.error}}if(h?p.firstChild.addEventListener("touchstart",v.onDropDownClick,{passive:!1}):p.firstChild.addEventListener("click",v.onDropDownClick,!1),v.valueDiv=p.getElementsByClassName(i)[0],f||p.appendChild(u),v.container=p,v.optionsContainer=u,f){var M=d.createElement("div");M.className=e.ui+"-mobile-buttons",u.insertBefore(M,u.firstChild);var T=d.createElement("div");if(v.multiOptions){var N=d.createElement("div");N.className="back-button",M.appendChild(N),N.addEventListener("touchstart",v.onBackButton,{passive:!1})}T.className="close-button",M.appendChild(T),T.addEventListener("touchend",v.closeDropDown)}}return e.prototype.setSelectedIndex=function(e,t){var r=this,n=g.isPhone();if(void 0===t)(e<0||e>r.optionsContainer.childNodes.length)&&(e=0),r.selectedIndex=e,r.multiOptions||(n&&e++,r.valueDiv.innerHTML=r.optionsContainer.childNodes[e].innerHTML),r.onchange&&r.onchange(r.selectedIndex);else{var i=r.optionsContainer.childNodes;(e<0||e>=i.length)&&(e=0),n&&e++;var o=i[e].getElementsByClassName("subdrop-down")[0].childNodes;(t<0||t>=o.length)&&(t=0);var a=new MouseEvent("click",{detail:Q});o[t].dispatchEvent(a)}},e.prototype.removeMobileCls=function(e,t){if(g.isPhone()){e||(e="mobile-show-elem");var r=this.optionsContainer.getElementsByClassName(e),n=void 0,i=r.length,o=void 0;for(n=0;n<i;n++)(o=r[n]).classList.remove(e),t?o.classList.add(t):o.style.display="none"}},e.prototype.getElement=function(){return this.container},e.prototype.setEditable=function(e){var t,r,n=this;if(n.editable!=e)if(n.editable=e,e){n.valueDiv.innerHTML='<input type="text"/>';var i=n.valueDiv.firstChild;i.addEventListener(g.isMobileDevice()?"touchstart":"click",(function(e){e.stopPropagation()})),t=i,r=function(e){return/^\d*$/.test(e)},["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach((function(e){t.oldValue="",t.addEventListener(e,(function(){r(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd,n.onchange&&n.onchange(-1,this.value)):this.hasOwnProperty("oldValue")&&(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd))}))}))}else n.valueDiv.innerHTML=""},e.prototype.isOpen=function(){return this.intervalID>0},e}(),te=function(){function e(e,t){var r=this;this.docEventsAdded=!1,this.changeVisibility=function(e){e.preventDefault(),e.stopPropagation(),r.bodyElement.classList.contains("ea-picker-visible")?r.hide():(r.setColorInternal(r.originalColor),r.show())},this.onPickerDown=function(e){var t=e.target;r.isColorSlider=t.id.indexOf("transp")<0,r.addDocEvents(),e.preventDefault()},this.addDocEvents=function(){r.docEventsAdded||(r.docEventsAdded=!0,g.on(document,["mouseup","touchend","touchcancel"],r.transparencyEvt),g.on(document,["mousemove","touchmove"],r.docMouseMove))},this.transparencyEvt=function(e){e.preventDefault();var t=e.type,n=e.target;if(n.className.indexOf("ea-slider-picker")>=0&&(n=n.parentElement.querySelector("div.ea-slider")),"mousemove"!=t||0!=e.buttons&&r.isColorSlider==n.id.indexOf("transp")<0){if("mousedown"==t)r.addDocEvents(),r.isColorSlider=n.id.indexOf("transp")<0;else if("mouseup"==t||"touchend"==t||"touchcancel"==t)return r.docEventsAdded=!1,g.un(document,["mouseup","touchend","touchcancel"],r.transparencyEvt),void g.un(document,["mousemove","touchmove"],r.docMouseMove);var i=g.getEvent(e);if(i){var o=n.getBoundingClientRect().left;r.isColorSlider?r.colorSlider(i.clientX-o):r.transparencySlider(i.clientX-o)}}},this.docMouseMove=function(e){var t=g.getEvent(e),n=r.transparencyPicker.parentElement.getBoundingClientRect().left,i=t.pageX-n;r.isColorSlider?r.colorSlider(i):r.transparencySlider(i)},this.paletteClick=function(e){if("mousemove"!=e.type||0!=e.buttons){e.preventDefault();var t=g.getEvent(e);if(t){var n=t.target;n==r.hueValPicker&&(n=n.parentElement);var i=r.paletteDiv,o=i.getBoundingClientRect(),a=Math.max(0,Math.min(o.width,t.clientX-o.left)),l=Math.max(0,Math.min(o.height,t.clientY-o.top)),s=a/i.clientWidth,c=l/i.clientHeight,d=Math.round(100*s),p=Math.round(Math.max(100-100*c,0));r.hsvColor[1]=d,r.hsvColor[2]=p;var u=r.hsvToRgb(r.hsvColor[0],d,p);r.color="#"+r.getHex(u[0].toString(16))+r.getHex(u[1].toString(16))+r.getHex(u[2].toString(16)),r._setColor(r.color+r.alpha.toString(16)),r.hueValPicker.style.left=a-9+"px",r.hueValPicker.style.top=l-9+"px"}}},this.hidePicker=function(e){for(var t=e.target,n=r.bodyElement;t;){if(t==n)return;if(!(t instanceof HTMLElement))break;t=t.parentElement}r.onCancel()},this._setColor=function(e){var t,i;r.hueValPicker.style.backgroundColor=e,r.sampleDiv.style.backgroundColor=e,r.target.style.backgroundColor=e;try{for(var o=n(r.listeners.change),a=o.next();!a.done;a=o.next()){var l=a.value;l.fn.call(l.caller,e)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(t)throw t.error}}},this.on=function(e,t,n){r.listeners[e].push({fn:t,caller:n})},this.un=function(e,t){var n=-1;r.listeners[e].forEach((function(e,r){if(e.fn==t)return n=r,!1})),n>=0&&r.listeners[e].splice(n,1)},this.swatchClick=function(e){r.setColorInternal(e.target.getAttribute("data-color"))},this.onSave=function(){var e,t,i=r.color;r.originalColor=i,r.alpha<255&&7==i.length&&(i+=r.getHex(r.alpha.toString(16)));try{for(var o=n(r.listeners.save),a=o.next();!a.done;a=o.next()){var l=a.value;l.fn.call(l.caller,i)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}r.hide()},this.onCancel=function(){var e,t;try{for(var i=n(r.listeners.cancel),o=i.next();!o.done;o=i.next()){var a=o.value;a.fn.call(a.caller,r.originalColor)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}r.hide()},this.isVisible=function(){return r.bodyElement.classList.contains("ea-picker-visible")},this.target=e,this.listeners={change:[],save:[],cancel:[]},this.init(t)}return e.prototype.init=function(e){var t=document.createElement("div");t.className="ea-color-picker",this.target.classList.add("ea-picker-target");var r=(1e4*Math.random()).toFixed(0),n=void 0===e.defaultColors||Array.isArray(e.defaultColors)&&e.defaultColors.length>0;t.innerHTML='<div class="ea-color-selection"><div class="ea-palette-container"><div style="position: relative;height: 100%;"><div class="ea-palette"></div></div><div id="palletePicker_'+r+'" class="ea-picker"></divid></div><div class="ea-selection-bottom"><div class="ea-color-sample"></div><div style="float: left;width:180px;"><div class="ea-color-chooser"><div id="colorPicker_'+r+'" class="ea-picker ea-slider-picker"></div><div id="colorSlider_'+r+'" class="ea-slider" tabindex="0" aria-label="hue selection slider" role="slider"></div></div><div class="ea-color-chooser"><div id="transpPicker_'+r+'" class="ea-picker ea-slider-picker"></div><div id="transpSlider_'+r+'" class="ea-slider ea-transparency" tabindex="0" aria-label="transparency selection slider" role="slider"></div></div></div></div>'+(n?'<div class="ea-swatches-panel"></div>':"")+'<div class="ea-picker-buttons"><button id="pickerOKBtn_'+r+'">OK</button><button id="pickerCancelBtn_'+r+'" style="margin-left: 20px;">Cancel</button></div></div>',this.hueValPicker=t.querySelector("#palletePicker_"+r),this.sampleDiv=t.querySelector("div.ea-color-sample"),this.colorPicker=t.querySelector("#colorPicker_"+r),this.transparencyPicker=t.querySelector("#transpPicker_"+r),g.on(this.colorPicker,["mousedown","touchstart"],this.onPickerDown),g.on(this.transparencyPicker,["mousedown","touchstart"],this.onPickerDown),g.on(t.querySelector("#transpSlider_"+r),["mousedown","mousemove","touchstart","touchmove"],this.transparencyEvt),g.on(t.querySelector("#colorSlider_"+r),["mousedown","mousemove"],this.transparencyEvt),g.on(t.querySelector("#pickerOKBtn_"+r),["click","touchstart"],this.onSave),g.on(t.querySelector("#pickerCancelBtn_"+r),["click","touchstart"],this.onCancel);var i=t.querySelector("div.ea-palette");if(g.on([i,this.hueValPicker],["mousedown","touchstart","mousemove","touchmove"],this.paletteClick),n){var o;o=Array.isArray(e.defaultColors)?e.defaultColors.slice(0,Math.min(14,e.defaultColors.length)):["#F44336","#E91E63F2","#9C27B0E5","#673AB7D8","#3F51B5CC","#2196F3BF","#03A9F4B2","#00BCD4B2","#009688BF","#4CAF50CC","#8BC34AD8","#CDDC39E5","#FFEB3BF2","#FFC107"],this.addSwatches(t.querySelector("div.ea-swatches-panel"),o)}this.paletteDiv=i,this.bodyElement=t,document.body.addEventListener("mousedown",this.hidePicker),g.on(this.target,["mousedown","touchstart"],this.changeVisibility),document.body.appendChild(t)},e.prototype.colorSlider=function(e){e<0?e=0:e>155&&(e=155);var t=e/155*360;this.hsvColor[0]=t,0==this.hsvColor[1]&&0==this.hsvColor[2]&&(this.hsvColor[1]=100,this.hsvColor[2]=100);var r=this.hsvToRgb(t,this.hsvColor[1],this.hsvColor[2]);this.setColorInternal("#"+this.getHex(r[0].toString(16))+this.getHex(r[1].toString(16))+this.getHex(r[2].toString(16))+this.getHex(this.alpha.toString(16)))},e.prototype.transparencySlider=function(e){e<0?e=0:e>155&&(e=155);var t=e/155;this.alpha=Math.round(255*t),this.transparencyPicker.style.left=e-6+"px";var r=this.hsvColor;this.paletteDiv.style.background="linear-gradient(to top, rgba(0, 0, 0, "+t+"), transparent),\n                        linear-gradient(to left, hsla("+r[0]+", 100%, 50%, "+t+"), rgba(255, 255, 255, "+t+"))";var n=this.alpha.toString(16);this.color.length>7?this.color=this.color.substr(0,7)+n:this.color+=n,this._setColor(this.color)},e.prototype.getHex=function(e){return 1==e.length?"0"+e:e},e.prototype.hsvToRgb=function(e,t,r){e=e/360*6,t/=100,r/=100;var n=Math.floor(e),i=e-n,o=r*(1-t),a=r*(1-i*t),l=r*(1-(1-i)*t),s=n%6,c=[r,a,o,o,l,r][s],d=[l,r,r,a,o,o][s],p=[o,o,l,r,r,a][s];return[Math.round(255*c),Math.round(255*d),Math.round(255*p)]},e.prototype.rgbToHsv=function(e,t,r){e/=255,t/=255,r/=255;var n,i,o=Math.min(e,t,r),a=Math.max(e,t,r),l=a-o,s=a;if(0===l)n=i=0;else{i=l/a;var c=((a-e)/6+l/2)/l,d=((a-t)/6+l/2)/l,p=((a-r)/6+l/2)/l;e===a?n=p-d:t===a?n=1/3+c-p:r===a&&(n=2/3+d-c),n<0?n+=1:n>1&&(n-=1)}return[Math.round(360*n),Math.round(100*i),Math.round(100*s)]},e.prototype.show=function(){var e=this.target.getBoundingClientRect(),t=this.bodyElement,r=function(){var n=t.getBoundingClientRect(),i=n.width;if(0==i)setTimeout(r,200);else{var o=window.innerWidth,a=window.innerHeight,l=e.left,s=e.top+e.height;e.left+i>o&&(l=Math.max(0,o-i)),s+n.height>a&&(s=Math.max(0,a-n.height)),t.style.left=l+"px",t.style.top=s+"px",t.style.opacity="1"}};r(),t.style.left=e.left+"px",t.style.top=e.top+e.height+"px",t.style.opacity="0.05",t.classList.add("ea-picker-visible")},e.prototype.hide=function(){this.bodyElement.classList.remove("ea-picker-visible")},e.prototype.getValidHexColor=function(e){if("#"==e.charAt(0))return 4==e.length?"#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]:e;var t=document.createElement("canvas").getContext("2d");return t.fillStyle=e,t.fillStyle},e.prototype.setColor=function(e){this.originalColor=this.getValidHexColor(e),this.setColorInternal(this.getValidHexColor(e))},e.prototype.setColorInternal=function(e){var t=e.substr(1).match(/.{2}/g).map((function(e){return parseInt(e,16)})),r=this.paletteDiv,n=t[3]||255;this.color=e;var i=this.rgbToHsv(t[0],t[1],t[2]);this.hsvColor=i,this.alpha=n;var o=this.colorPicker,a=o.parentElement.querySelector("div.ea-slider").clientWidth||155;this.transparencyPicker.style.left=(n*a/255-6).toFixed(0)+"px",this.hueValPicker.style.left=(i[1]/100*(r.clientWidth||230)-9).toFixed(0)+"px",this.hueValPicker.style.top=((100-i[2])/100*(r.clientHeight||125)-9).toFixed(0)+"px",o.style.left=a*i[0]/360-6+"px";var l=(n/255).toFixed(2);r.style.background="linear-gradient(to top, rgba(0, 0, 0, "+l+"), transparent),\n                        linear-gradient(to left, hsla("+i[0]+", 100%, 50%, "+l+"), rgba(255, 255, 255, "+l+"))",this._setColor(e)},e.prototype.addSwatches=function(e,t){var r,i,o=[];try{for(var a=n(t),l=a.next();!l.done;l=a.next()){var s=l.value,c=document.createElement("div");c.style.backgroundColor=s,o.push(c),c.setAttribute("data-color",s),e.appendChild(c)}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}g.on(o,["mousedown","touchstart"],this.swatchClick)},e}(),re=function(e){function t(t,r){var n=e.call(this)||this;n.pickerColorChange=function(e){var t=n;t.drawStyle.color=e,t.sampleLine.style.backgroundColor=e,t.colorPickerDiv.style.backgroundColor=e},n.pickerColorSave=function(e){n.sampleLine.style.stroke=e,n.pickerColorChange(e)},n.pickerCancel=function(e){n.pickerColorChange(e),n.colorPickerDiv.style.backgroundColor=e},n.onOKBtnClick=function(){var e=n;e.callback&&e.callback(e.drawStyle),e.hide()},n.cancelBtnClick=function(){n.hide()},n.onLineStyleChange=function(e){var t="none",r="unset",o=n.sampleLine.style;switch(e){case i.DOTTED:var a=parseInt(o.strokeWidth,10);if(isNaN(a))return;t="1 "+(a*(a<7?2:1.5)).toString(),r="round";break;case i.DASHED:t="10%"}o.strokeDasharray=t,o.strokeLinecap=r,n.drawStyle.type=e},n.onLineWidthChange=function(e){var t=["1","2","3","5","7","10","12","15","20","25"];n.sampleLine.style.strokeWidth=t[e],n.drawStyle.width=parseInt(t[e],10),n.onLineStyleChange(n.drawStyle.type)},n.beginArrowChange=function(e){n.changeMarker(e,"marker-start"),n.drawStyle.startArrow=e},n.endArrowChange=function(e){n.changeMarker(e,"marker-end"),n.drawStyle.endArrow=e},n.hideDialog=function(t){var r=n;r.drawStyleDropDown.isOpen()||r.lineWidthDropDown.isOpen()||r.startArrowDropDown.isOpen()||r.endArrowDropDown.isOpen()||n.picker.isVisible()||e.prototype.hideDialog.call(n,t)};var o=n;o.config=t,o.picker=null,o.height=300,o.drawStyle={width:r?r.width:1,type:r?r.type:i.SOLID,color:r?r.color:"#000",startArrow:r?r.startArrow:0,endArrow:r?r.endArrow:0};var a=document,l=a.createElement("div"),s=a.createElement("button"),c=a.createElement("div"),d=a.createElement("button");c.className="body",l.appendChild(c),l.className=t.ui+"-dialog",c.style.height="230px";var p=a.createElement("label");p.className="label",p.innerHTML="Line Style",c.appendChild(p);var u=new ee(t,['<div style="height:1px;background:#000;margin-top:12px"></div>','<div style="height:1px;border-top:1px dotted #000;margin-top:12px"></div>','<div style="height:1px;border-top:1px dashed #000;margin-top:12px"></div>']);u.setSelectedIndex(r.type),u.onchange=o.onLineStyleChange,o.drawStyleDropDown=u,c.appendChild(u.getElement()),(p=a.createElement("label")).className="label",p.innerHTML="Width",c.appendChild(p);var h,g=[1,2,3,5,7,10,12,15,20,25],f=0,m=[],y=-1;for(f=0;f<g.length;f++)(h=g[f])==r.width&&(y=f),m.push('<div style="height:'+h+"px;background:#000;margin-top:"+(25-h)/2+'px"></div>');var w=new ee(t,m);w.onchange=o.onLineWidthChange,c.appendChild(w.getElement()),o.lineWidthDropDown=w,n.arrowStyleDiv=a.createElement("div"),(p=a.createElement("label")).className="label",p.innerHTML="Arrow",n.arrowStyleDiv.appendChild(p);var b=new Array,x=new Array;for(b.push('<div class="arrow-style-none"></div>'),x.push('<div class="arrow-style-none"></div>'),f=0;f<6;f++)b.push('<div class="arrow-style arrow-style'+f+'"></div>'),x.push('<div class="arrow-style arrow-style-end'+f+'"></div>');var S=new ee(t,b,"arrow-style-dropdown"),E=new ee(t,x,"arrow-style-dropdown");o.arrowStyleDiv.appendChild(S.getElement()),o.arrowStyleDiv.appendChild(E.getElement()),S.onchange=o.beginArrowChange,E.onchange=o.endArrowChange,o.startArrowDropDown=S,o.endArrowDropDown=E,c.appendChild(o.arrowStyleDiv),(p=a.createElement("label")).className="label",p.innerHTML="Color",c.appendChild(p);var k=a.createElement("div");k.className="color-picker",c.appendChild(k),o.colorPickerDiv=k;var A=a.createElement("div");c.appendChild(A),A.className="sample",A.innerHTML='<svg width="200" height="80"><defs></defs><line x1="10" x2="190" y1="40" y2="40" stroke="black"/></svg>';var L=A.getElementsByTagName("defs")[0];for(f=0;f<6;f++){var C=v.createArrowMarker(t,f)[0];C.setAttribute("id","sampleMarker_"+(f+1)),C.style.stroke="#000",L.appendChild(C),f<2&&((C=v.createArrowMarker(t,f,null,!0)[0]).setAttribute("id","start_sampleMarker_"+(f+1)),C.style.stroke="#000",L.appendChild(C))}o.sampleLine=A.getElementsByTagName("line")[0];var D=a.createElement("div");return D.className="btn-container",l.appendChild(D),D.appendChild(s),D.appendChild(d),s.className="button",s.style.marginRight="20px",d.className="button",s.innerHTML="OK",d.innerHTML="Cancel",s.addEventListener("click",o.onOKBtnClick),d.addEventListener("click",o.cancelBtnClick),o.container=l,o.onLineStyleChange(r.type),y>=0&&(w.setSelectedIndex(y),o.onLineWidthChange(y)),n}return r(t,e),t.prototype.show=function(t,r,i){var o,a;e.prototype.show.call(this,t,r,i);var l,s,c=this,d=-1,p=-1,u=c.config.drawStyle,h="",g=-1,f=-1;try{for(var m=n(r),v=m.next();!v.done;v=m.next()){var y=v.value.getDrawStyle(),w=y.color;l=y.type,s=y.width,w!=h&&(h=""===h?w:"-1"),y.startArrow!=g&&(g=-1===g?y.startArrow:-2),y.endArrow!=f&&(f=-1===f?y.endArrow:-2),l!=d&&(d=-1==d?l:-2),s!=p&&(p=-1==p?s:-2)}}catch(e){o={error:e}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}d<0&&(d=u.type),p<0&&(p=u.width),g<0&&(f=0),f<0&&(f=0),c.drawStyleDropDown.setSelectedIndex(d);var b=[1,2,3,5,7,10,12,15,20,25].indexOf(p);if(b<0&&(b=0),c.lineWidthDropDown.setSelectedIndex(b),c.startArrowDropDown.setSelectedIndex(g),c.endArrowDropDown.setSelectedIndex(f),!c.picker){c.picker=new te(c.colorPickerDiv,c.config);var x=c.picker;x.on("change",c.pickerColorChange,c),x.on("save",c.pickerColorSave,c),x.on("cancel",c.pickerCancel,c)}""!==h&&"-1"!=h||(h=u.color),c.picker.setColor(h)},t.prototype.changeMarker=function(e,t){var r="none";e>0&&(r="url(#"+(1!=e&&2!=e||"marker-start"!=t?"":"start_")+"sampleMarker_"+e+")"),this.sampleLine.setAttribute(t,r)},t}(f),ne='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"></path></svg>',ie=function(e){function t(){var t=e.call(this)||this;return t.xtype=b.DRAW_PROPERTY,t.title="Line Style",t.iconSVG=ne,t}return r(t,e),t.prototype.invoke=function(e,t){this.drawDialog||(this.drawDialog=new re(e,e.drawStyle)),this.drawDialog.show(this.element,t,(function(r){var i,o;e.drawStyle.width=r.width,e.drawStyle.type=r.type;try{for(var a=n(t),l=a.next();!l.done;l=a.next())l.value.setDrawStyle(r)}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}))},t}($),oe=function(e){function t(r,n){var i=e.call(this)||this;i.blurIndex=0,i.shadowIndex=0,i.pickerSave=function(e){var t=i;t.fillStyle.color=e,t.sampleDiv.style.backgroundColor=e},i.pickerCancel=function(e){i.pickerSave(e),i.colorPickerDiv.style.backgroundColor=e},i.pickerColorChange=function(e){i.colorPickerDiv.style.backgroundColor=e,i.fillStyle.color=e},i.onOKBtnClick=function(){var e=i,r=null,n=e.blurIndex,o=e.shadowIndex;if(n>0){var l="";n<t.BLUR_OPTIONS.length&&(l=t.BLUR_OPTIONS[n]),r=[{effectType:a.BLUR,index:n,value:l}]}if(o>0){var s="";o<t.SHADOW_OPTIONS.length&&(s=t.SHADOW_OPTIONS[o]),null==r&&(r=[]),r.push({effectType:a.SHADOW,index:o,value:s})}e.fillStyle.effects=r||null,e.fillStyle.opacity=parseInt(e.opacitySlider.value,10),e.callback&&e.callback(e.fillStyle),e.hide()},i.cancelBtnClick=function(){i.hide()},i.onFillStyleChange=function(e){i.sampleDiv.className="sample fill-pattern"+e,i.fillStyle.fillType=e},i.onEffectChange=function(e,t,r){var n=i;switch(r){case 0:n.blurIndex=e;break;case 1:n.shadowIndex=e}var o=n.getShadowFilter(n.shadowIndex)+n.getBlurFilter(n.blurIndex);""===o&&(o="none"),n.sampleDiv.style.filter=o},i.hideDialog=function(t){i.fillPatternDropDown.isOpen()||i.effectsDropDown.isOpen()||i.picker.isVisible()||e.prototype.hideDialog.call(i,t)};var o=i;o.config=r,o.picker=null,o.height=275,o.fillStyle={fillType:n?n.fillType:0,color:n?n.color:"#000",opacity:n?n.opacity:100,effects:n?n.effects:[]};var l=document,s=l.createElement("div"),c=l.createElement("button"),d=l.createElement("div"),p=l.createElement("button");d.className="body",s.appendChild(d),s.className=r.ui+"-dialog",d.style.height="180px";var u=l.createElement("label");u.className="label",u.innerHTML="Fill Pattern",o.fillPatternLabel=u,d.appendChild(u);var h,f=['<div style="height:20px;background:#000;"></div>'];for(h=1;h<10;h++)f.push('<div class="fill-pattern'+h+'" style="height:20px;"></div>');var m=new ee(r,f,null,"fill-value");m.setSelectedIndex(n.fillType),m.onchange=o.onFillStyleChange,d.appendChild(m.getElement()),o.fillPatternDropDown=m,(u=l.createElement("label")).className="label",u.innerHTML="Color",d.appendChild(u);var v=l.createElement("div");v.className="color-picker",d.appendChild(v),o.colorPickerDiv=v,(u=l.createElement("label")).className="label",u.innerHTML="Transparency",d.appendChild(u);var y=l.createElement("input");y.className="slider transparency",y.type="range",y.max="100",y.min="0",y.value=n.opacity.toString(),g.fixIOSSlider(y),o.opacitySlider=y,d.appendChild(y),(u=l.createElement("label")).className="label",u.innerHTML="Effects",d.appendChild(u);var w=["<div>Blur</div>",'<div class="blur-option blur-none">None<div></div></div>'],b=["1px","2px","5px","10px","20px","50px"],x=t.BLUR_OPTIONS,S=["<div>Shadow</div>","None"];for(h in b)w.push('<div class="blur-option">'+b[h]+'<div style="filter:blur('+x[h]+')"></div></div>');S=S.concat(t.SHADOW_OPTIONS);var E=new ee(r,[w,S]);E.setSelectedIndex(n.fillType),E.onchange=o.onEffectChange,o.effectsDropDown=E,d.appendChild(E.getElement());var k=l.createElement("div");d.appendChild(k),k.className="sample",k.style.height="30px",o.sampleDiv=k;var A=l.createElement("div");return A.className="btn-container",s.appendChild(A),A.appendChild(c),A.appendChild(p),c.className="button",c.style.marginRight="20px",p.className="button",c.innerHTML="OK",p.innerHTML="Cancel",c.addEventListener("click",o.onOKBtnClick),p.addEventListener("click",o.cancelBtnClick),o.container=s,i}return r(t,e),t.prototype.show=function(t,r,i){var o,l,s,c;e.prototype.show.call(this,t,r,i);var d,p,u,h,g,f=this,m=-1,v=f.config.fillStyle,y="",w=-1,b=-1,x=-1,S=0;try{for(var E=n(r),k=E.next();!k.done;k=E.next()){(g=k.value)instanceof P&&S++,p=(d=g.getFillStyle()).fillType;var A=d.color,L=d.opacity;if(p!=m&&(m=-1===m?p:-2),L!=w&&(w=-1===w?L:-2),A!=y&&(y=""===y?A:"-1"),u=-1,h=-1,d.effects)try{for(var C=(s=void 0,n(d.effects)),D=C.next();!D.done;D=C.next()){var M=D.value;switch(M.effectType){case a.BLUR:(u=M.index)!=b&&(b=-1===b?u:-2);break;case a.SHADOW:(h=M.index)!=x&&(x=-1===x?h:-2)}}}catch(e){s={error:e}}finally{try{D&&!D.done&&(c=C.return)&&c.call(C)}finally{if(s)throw s.error}}-1==u&&(b=-2),-1==h&&(x=-2)}}catch(e){o={error:e}}finally{try{k&&!k.done&&(l=E.return)&&l.call(E)}finally{if(o)throw o.error}}if(""!==y&&"-1"!=y||(y=v.color),!f.picker){f.picker=new te(f.colorPickerDiv,this.config);var T=f.picker;T.on("change",f.pickerColorChange,f),T.on("save",f.pickerSave,f),T.on("cancel",f.pickerCancel,f)}m<0&&(m=v.fillType),f.fillPatternDropDown.setSelectedIndex(m),w<0&&(w=v.opacity),b<0&&(b=0),x<0&&(x=0),f.effectsDropDown.setSelectedIndex(0,b),f.effectsDropDown.setSelectedIndex(1,x),f.opacitySlider.value=w.toString(),f.fillStyle.color=y,f.picker.setColor(y),f.colorPickerDiv.style.backgroundColor=y,f.sampleDiv.style.backgroundColor=y;var N=S==r.length?"none":"";f.fillPatternDropDown.getElement().style.display=N,f.fillPatternLabel.style.display=N},t.prototype.getBlurFilter=function(e){if(e<1)return"";var r=t.BLUR_OPTIONS;return e>r.length?"":" blur("+r[e-1]+")"},t.prototype.getShadowFilter=function(e){if(e<1)return"";var r=t.SHADOW_OPTIONS;if(e>r.length)return"";var n=r[e-1]+" ";return" drop-shadow("+n+n+n+")"},t.BLUR_OPTIONS=[".2px",".5px","1px","3px","5px","10px"],t.SHADOW_OPTIONS=["1px","2px","5px","10px","20px"],t}(f),ae='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M204.3 5C104.9 24.4 24.8 104.3 5.2 203.4c-37 187 131.7 326.4 258.8 306.7 41.2-6.4 61.4-54.6 42.5-91.7-23.1-45.4 9.9-98.4 60.9-98.4h79.7c35.8 0 64.8-29.6 64.9-65.3C511.5 97.1 368.1-26.9 204.3 5zM96 320c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm32-128c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128-64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 64c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"></path></svg>',le=function(e){function t(){var t=e.call(this)||this;return t.xtype=b.FILL_PROPERTY,t.title="Fill Style",t.iconSVG=ae,t}return r(t,e),t.prototype.invoke=function(e,t){this.fillDialog||(this.fillDialog=new oe(e,e.fillStyle)),this.fillDialog.show(this.element,t,(function(e){var r,i;try{for(var o=n(t),a=o.next();!a.done;a=o.next())a.value.setFillStyle(e)}catch(e){r={error:e}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}))},t}($),se=function(){},ce=function(e){function t(t,r){var n=e.call(this)||this;if(n.onOKBtnClick=function(){n.callback&&n.callback(n.font),n.hide()},n.cancelBtnClick=function(){n.hide()},n.onFontSizeChange=function(e,t){n.sampleTextDiv.style.fontSize=t+"px",n.font.size=t},n.onButtonClick=function(e){var t=e.target;"B"==t.innerText?(n.font.bold=!n.font.bold,n.sampleTextDiv.style.fontWeight=n.font.bold?"bold":"normal",n.font.bold?t.className="button":t.className="button hover-button"):(n.font.italic=!n.font.italic,n.sampleTextDiv.style.fontStyle=n.font.italic?"italic":"normal",n.font.italic?t.className="button":t.className="button hover-button")},n.onFontNameChange=function(e){var t=e.target,r=t.options[t.selectedIndex].value;n.font.name=r,n.sampleTextDiv.style.fontFamily=r},!r){r=new se;var i=window.getComputedStyle(document.body,null);r.name=i.getPropertyValue("font-family"),r.size=parseInt(i.getPropertyValue("font-size"),10),r.italic=!1}n.font=r;var o=document,a=o.createElement("div"),l=o.createElement("button"),s=o.createElement("div"),c=o.createElement("button"),d=parseInt(""+1e3*Math.random(),10);s.className="body",a.appendChild(s),a.className=t.ui+"-dialog";var p,u,h=o.createElement("select"),g=["Arial","Britannic Bold","Broadway","Calibri","Cambria","Centaur","Chiller","Consolas","Constantia","Courier New","Freestyle Script","Gabriola","Georgia","Harlow Solid Italic","Harrington","Informal Roman","Lucida Bright","Lucida Calligraphy","Lucida Console","Lucida Fax","Times New Roman","Segoe Script","Segoe UI","Sans-Serif","Tahoma","Verdana"];for(p in g)(u=o.createElement("option")).text=g[p],u.value=g[p],h.appendChild(u);h.id="fontDlgDropDown"+d,h.addEventListener("change",n.onFontNameChange,!1);var f=o.createElement("label"),m=o.createElement("div"),v=o.createElement("div");m.innerHTML="B",v.innerHTML="I",m.style.fontWeight="bold",v.style.fontStyle="italic",m.className="button hover-button",v.className="button hover-button",f.innerHTML="Font",f.htmlFor=h.id,s.appendChild(f),s.appendChild(h),s.appendChild(m),s.appendChild(v);var y=o.createElement("div");y.setAttribute("style","width:100%;height:30px;");var w=new ee(t,["4","5","6","10","11","14","16","18","20","24","28","32","36","45","50"]);w.setEditable(!0),w.onchange=n.onFontSizeChange,n.fontSizeDropDown=w,(f=o.createElement("label")).innerHTML="Size",y.appendChild(f);var b=w.getElement();b.style.marginLeft="11px",y.appendChild(b),s.appendChild(y),m.addEventListener("click",n.onButtonClick,!0),v.addEventListener("click",n.onButtonClick,!0);var x=o.createElement("div");x.className="btn-container",a.appendChild(x);var S=o.createElement("div");return s.appendChild(S),S.className="sample",S.innerHTML="Sample Text",n.sampleTextDiv=S,x.appendChild(l),x.appendChild(c),l.className="button",l.style.marginRight="20px",c.className="button",l.innerHTML="OK",c.innerHTML="Cancel",l.addEventListener("click",n.onOKBtnClick,!0),c.addEventListener("click",n.cancelBtnClick,!0),n.container=a,n}return r(t,e),t}(f),de='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path class="ea-button" d="M432 416h-23.41L277.88 53.69A32 32 0 0 0 247.58 32h-47.16a32 32 0 0 0-30.3 21.69L39.41 416H16a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16h-19.58l23.3-64h152.56l23.3 64H304a16 16 0 0 0-16 16v32a16 16 0 0 0 16 16h128a16 16 0 0 0 16-16v-32a16 16 0 0 0-16-16zM176.85 272L224 142.51 271.15 272z"></path></svg>',pe=function(e){function t(){var t=e.call(this)||this;return t.xtype=b.FONT_PROPERTY,t.iconSVG=de,t}return r(t,e),t.prototype.invoke=function(e,t){var r=this;r.fontDialog||(r.fontDialog=new ce(e)),r.fontDialog.show(r.element,t,(function(e){var i,o;r.font=e;try{for(var a=n(t),l=a.next();!l.done;l=a.next()){var s=l.value;s instanceof P&&s.setFont(e)}}catch(e){i={error:e}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}))},t}($),ue=function(e){function t(t){var r=e.call(this)||this;r.onBlurChange=function(e){r.sampleDiv.style.filter="blur("+parseFloat(r.blurSlider.value)/15+"px)"},r.onOKBtnClick=function(){var e=r;e.callback&&e.callback({blur:parseFloat(e.blurSlider.value)/15,opacity:parseFloat(e.transparencySlider.value)/100}),e.hide()},r.cancelBtnClick=function(){r.hide()},r.hideDialog=function(t){e.prototype.hideDialog.call(r,t)};var n=r,i=document,o=i.createElement("div"),a=i.createElement("button"),l=i.createElement("div"),s=i.createElement("button");n.height=150,l.className="body",o.appendChild(l),o.className=t.ui+"-dialog",l.style.height="120px";var c=i.createElement("label");c.className="label",c.innerHTML="Blur Radius",l.appendChild(c);var d=i.createElement("input");d.className="slider transparency",d.type="range",d.max="200",d.min="0",d.value="5",g.fixIOSSlider(d),n.blurSlider=d,d.addEventListener("change",n.onBlurChange),d.addEventListener("mousemove",n.onBlurChange),l.appendChild(d),(c=i.createElement("label")).className="label",c.innerHTML="Transparency",l.appendChild(c),n.transparencyLabel=c;var p=i.createElement("input");p.className="slider transparency",p.type="range",p.max="100",p.min="0",p.value="1",g.fixIOSSlider(p),n.transparencySlider=p,p.addEventListener("change",n.onBlurChange),p.addEventListener("mousemove",n.onBlurChange),l.appendChild(p);var u=i.createElement("div");l.appendChild(u),u.className="sample",u.style.height="30px";var h,f=v.getDefs(t).getElementsByTagName("pattern"),m=f.length;for(h=0;h<m;h++)if(0===f[h].id.indexOf("mainFillPattern")){u.style.backgroundImage='url("'+f[h].getElementsByTagName("image")[0].href.baseVal+'")';break}n.sampleDiv=u;var y=i.createElement("div");return y.className="btn-container",o.appendChild(y),y.appendChild(a),y.appendChild(s),a.className="button",a.style.marginRight="20px",s.className="button",a.innerHTML="OK",s.innerHTML="Cancel",a.addEventListener("click",n.onOKBtnClick),s.addEventListener("click",n.cancelBtnClick),n.container=o,r}return r(t,e),t.prototype.show=function(t,r,i){var o,a;e.prototype.show.call(this,t,r,i);var l,s,c,d="-1",p="-1",u=!1;try{for(var h=n(r),f=h.next();!f.done;f=h.next()){if((c=f.value)instanceof J)l=c.getBlur();else{if(!(c instanceof W))continue;u=!0,l=c.getBlur(),(s=c.getOpacity())!=p&&(p="-1"==p?s:"-2")}l!=d&&(d="-1"==d?l:"-2")}}catch(e){o={error:e}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}var m=parseInt(d,10),v=parseFloat(p);d=m<0?"5":(15*m).toString(),p=v<0?"100":(100*v).toString();var y=this,w=g.isPhone();u?(y.transparencySlider.style.display="block",y.transparencySlider.value=p,y.transparencyLabel.style.display="block",w||(y.container.style.height="180px")):(y.transparencySlider.style.display="none",y.transparencyLabel.style.display="none",w||(y.container.style.height="150px")),y.blurSlider.value=d},t}(f),he='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"></path></svg>',ge=function(e){function t(){var t=e.call(this)||this;return t.xtype=b.BLUR_PROPERTY,t.iconSVG=he,t}return r(t,e),t.prototype.invoke=function(e,t){this.blurDialog||(this.blurDialog=new ue(e)),this.blurDialog.show(this.element,t,(function(e){var r,i,o=e.opacity,a=e.blur;try{for(var l=n(t),s=l.next();!s.done;s=l.next()){var c=s.value;c instanceof W?(c.setOpacity(o),c.setBlur(a)):c instanceof J&&c.setBlur(a)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}))},t}($),fe='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path class="ea-button" style="fill:url(#easyAnnotatorBtnGradient) #447799;" d="M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"></path></svg>',me='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path class="ea-button" d="M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"></path></svg>',ve=function(){function e(e,t){var r=this;if(this.selectedItems=new Array,this.annotators=new Array,this.isDragging=!1,this.pushedAnnotator=null,this.selectPos=new A(0,0),this.isImageElement=!0,this.imgLoaded=!1,this.imageLoaded=function(){r.imgLoaded=!0},this.docPress=function(e){var t=g.getEvent(e);if(t)for(var n=t.target,i=r.container,o=r.config.ui;n;){if(n==i)return;if(!(n instanceof Element))return;var a=n.className;if(a.indexOf(o+"-dialog")>=0||a.indexOf("ea-color-picker")>=0)return;n=n.parentElement}r.deselectAll()},this.onResize=function(e){r.doLayout()},this.onMouseMove=function(e){var t,i,o,a;if((1&e.buttons)>0){var l=r,s=l.selectedItems,c=e.screenX-l.startX,d=e.screenY-l.startY;if(l.isDragging&&s.length)try{for(var p=n(l.selectedItems),u=p.next();!u.done;u=p.next())(S=u.value).moveBy(c,d,e)}catch(e){t={error:e}}finally{try{u&&!u.done&&(i=p.return)&&i.call(p)}finally{if(t)throw t.error}}else if(!l.pushedAnnotator){var h=l.selectRect,g=l.selectPos,f=l.svgContainer.getBoundingClientRect(),m=void 0,v=void 0,y=void 0,w=void 0;c=e.clientX-f.left-g.x,d=e.clientY-f.top-g.y,c<0?(m=g.x+c,y=-1*c,h.setAttribute("x",m.toString()),h.setAttribute("width",y.toString())):(m=h.x.baseVal.value,y=c,h.setAttribute("width",c.toString())),d<0?(v=g.y+d,w=-1*d,h.setAttribute("y",v.toString()),h.setAttribute("height",w.toString())):(v=h.y.baseVal.value,w=d,h.setAttribute("height",d.toString())),s.length=0;try{for(var b=n(l.annotators),x=b.next();!x.done;x=b.next()){var S;(S=x.value).intersects(m,v,y,w)?(S.setSelected(!0),s.push(S)):S.setSelected(!1)}}catch(e){o={error:e}}finally{try{x&&!x.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}l.propertiesToolbar&&l.propertiesToolbar.setSelectedItems(s)}}},this.onMouseDown=function(e){var t,i,o=r,a=o.selectPos,l=o.selectRect,s=o.svgContainer.getBoundingClientRect(),c=!1,d=e.clientX-s.left,p=e.clientY-s.top;a.x=d,a.y=p,o.selectedItems.length=0;try{for(var u=n(o.annotators),h=u.next();!h.done;h=u.next()){var g=h.value;g.containsPoint(d,p)?(g.setSelected(!0),c=!0,o.selectedItems.push(g)):g.setSelected(!1)}}catch(e){t={error:e}}finally{try{h&&!h.done&&(i=u.return)&&i.call(u)}finally{if(t)throw t.error}}o.propertiesToolbar&&o.propertiesToolbar.setSelectedItems(o.selectedItems),c||o.pushedAnnotator||(l.setAttribute("x",a.x.toString()),l.setAttribute("y",a.y.toString()),l.setAttribute("width","0"),l.setAttribute("height","0"),o.svgContainer.appendChild(o.selectRect)),c&&o.startDrag(e.screenX,e.screenY),o.deselectAll()},this.onMouseUp=function(e){var t,i,o=r;o.isDragging=!1,o.selectRect.parentNode&&o.svgContainer.removeChild(o.selectRect);try{for(var a=n(o.selectedItems),l=a.next();!l.done;l=a.next())l.value.processMouseUp()}catch(e){t={error:e}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}},this.itemSelected=function(e){var t=r;t.deselectAll(),t.selectedItems.push(e),e.setSelected(!0),t.propertiesToolbar.setSelectedItems(t.selectedItems)},!e)throw new Error("Image element must be specified!");var o=this,a={};"string"==typeof e?(o.imageElement=new Image,o.imageElement.src=e,o.isImageElement=!1,o.imageElement.onload=o.imageLoaded):(o.imageElement=e,o.imgLoaded=o.imageElement.complete,o.imgLoaded||(o.imageElement.onload=o.imageLoaded)),t||(t={}),t.targetElement=t.targetElement||document.body,t.ui=t.ui||"default",t.font=t.font||{italic:!1,bold:!1},t.font.size=t.font.size||24,t.font.name=t.font.name||"Arial";var l=t.width,s=t.height;l||(l=o.imageElement.clientWidth||o.imageElement.width),s||(s=o.imageElement.clientHeight||o.imageElement.height);var c=l<600?1:2;t.drawStyle||(t.drawStyle={width:c,type:i.SOLID,startArrow:0,endArrow:0,color:"#000"}),t.fillStyle||(t.fillStyle={fillType:0,color:"#8EB9ED",opacity:100}),o.width=l,o.height=s,o.targetElement=t.targetElement,void 0===t.showToolbar&&(t.showToolbar=!0),void 0===t.showProperties&&(t.showProperties=!0);var d=t;for(var p in d)a[p]=d[p];a.annotatorIdx=v.getNextAnnotatorIdx(),o.config=a;var u=t.drawStyle,h=t.fillStyle;o.drawStyle={color:u.color,width:u.width,type:u.type,startArrow:u.startArrow,endArrow:u.endArrow},o.fillStyle={fillType:h.fillType,color:h.color,opacity:h.opacity}}return e.prototype.show=function(e,t){var r=this;r.imgLoaded?(r.completeCallback=e,void 0===t&&(t=2),r.exportType=t,r.init(),r.addListeners(),r.initToolbar()):window.setTimeout((function(){r.show(e,t)}),500)},e.prototype.init=function(){var e=document,t=e.createElement("div"),r=e.createElementNS("http://www.w3.org/2000/svg","svg"),n=this,i=n.config,o=i.ui,a=n.imageElement;t.className=o+"-annotator-container",i.containerCls&&t.classList.add(i.containerCls),n.config.style&&t.setAttribute("style",n.config.style),n.selectRect=e.createElementNS("http://www.w3.org/2000/svg","rect"),n.selectRect.setAttribute("class",o+"-annotator-select-rect"),0!=n.width&&0!=n.height||(n.width=a.clientWidth||a.width,n.height=a.clientHeight||a.height),i.sizePercentage=Math.max(.25,Math.min(1,n.width/800));var l=n.width.toString(),s=n.height.toString();r.setAttribute("xmlns","http://www.w3.org/2000/svg"),r.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),r.setAttribute("width",l),r.setAttribute("height",s),r.setAttribute("viewBox","0 0 "+l+" "+s);var c=a.getBoundingClientRect(),d=n.targetElement.parentElement.getBoundingClientRect();t.appendChild(r),n.isImageElement||(t.style.position="unset"),n.container=t,n.svgContainer=r,n.targetElement.appendChild(t);var p=i.x,u=i.y;null==p&&(p=c.left-d.left+window.scrollX),null==u&&(u=c.top-window.scrollY),t.style.top=u+"px",t.style.left=p+"px",t.style.width=l+"px",t.style.height=s+"px",n.defs=e.createElementNS("http://www.w3.org/2000/svg","defs");var h=e.createElementNS("http://www.w3.org/2000/svg","pattern");h.setAttribute("width",l),h.setAttribute("height",s),h.setAttribute("patternUnits","userSpaceOnUse");var g=n.config.annotatorIdx;r.id="easyAnnotatorSVGContainer"+g,h.setAttribute("id","mainFillPattern"+g),h.innerHTML='<image preserveAspectRatio="none" width="'+l+'" height="'+s+'" xlink:href="'+n.imageElement.src+'"/>',n.defs.appendChild(h),r.appendChild(n.defs),n.imagePattern=h;var f=e.createElementNS("http://www.w3.org/2000/svg","rect");if(f.setAttribute("width","100%"),f.setAttribute("height","100%"),f.setAttribute("fill","url(#mainFillPattern"+g+")"),r.appendChild(f),n.rectSVGElement=f,n.initGradients(t),window.addEventListener("resize",n.onResize),n.isImageElement){var m=n.config.hideElement;(m||void 0===m)&&(n.imageElement.style.visibility="hidden")}},e.prototype.initGradients=function(e){var t=document.getElementById("easyAnnotationGradientSVG");t||((t=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("id","easyAnnotationGradientSVG"),t.setAttribute("style","width:0;height:0;position:absolute;"),t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false"),t.innerHTML='<linearGradient class="'+this.config.ui+'-btn-gradient" id="easyAnnotatorBtnGradient" x2="1" y2="1">                    <stop offset="0%" stop-color="var(--color-stop-1)" />                    <stop offset="50%" stop-color="var(--color-stop-2)" />                    <stop offset="100%" stop-color="var(--color-stop-3)" />                </linearGradient>',e.appendChild(t))},e.prototype.addListeners=function(){var e=this.svgContainer;e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp)},e.prototype.startDrag=function(e,t){this.startX=e,this.startY=t,this.isDragging=!0},e.prototype.doLayout=function(){var e,t=this,r=t.isImageElement?t.imageElement.getBoundingClientRect():t.container.getBoundingClientRect(),n=(t.width,0),i=0,o=0,a=window.scrollX,l=window.scrollY,s=r.top+l,c=r.left+a,d=0,p=t.targetElement.getBoundingClientRect(),u=t.targetElement==document.body;u||(s-=p.top+l,c-=p.left+a),t.toolbar&&(i=t.toolbar.getContainer().childNodes.length),t.propertiesToolbar&&(o=t.propertiesToolbar.getContainer().childNodes.length,d=(v=(b=t.propertiesToolbar.getContainer()).getBoundingClientRect()).height,b.style.top=s-v.height+"px",b.style.left=c+"px");var h=t.width-20,g=h/(i+o);if(e=o*(g=Math.min(30,Math.max(24,g))),(n=i*g)>0){var f=h-e;n>f&&(n=f);var m=t.toolbar.getContainer();m.style.width=n+"px";var v=m.getBoundingClientRect();0==d&&(d=v.height),m.style.top=s-v.height+"px",m.style.left=r.right-(u?0:p.left)-v.width+"px",t.toolbar.doLayout();for(var y=m.firstChild,w=100/m.childNodes.length;y;)y.style.width=w+"%",y=y.nextSibling}if(e>0){var b;(b=t.propertiesToolbar.getContainer()).style.width=e+"px",y=b.firstChild,w=void 0;for(var x=0;y;)y.className.indexOf("-toolbar-item")>0&&x++,y=y.nextSibling;for(w=100/x,y=b.firstChild;y;)y.className.indexOf("-toolbar-item")>0&&(y.style.width=w+"%"),y=y.nextSibling}t.container.style.top=s+"px",t.container.style.left=c+"px"},e.prototype.initToolbar=function(){var e=this,t=e.config,r=t.showToolbar,n=t.showProperties,i=t.toolbarItems;if(r){if(null==i)i=[{itemId:"delete",iconSVG:fe,title:"Delete selected or all elements"},new G,new E,new V,new N,new R,new _,new U,new K,new D(e.config),{itemId:"save",iconSVG:me,title:"Save changes and close annotator"}];else for(var o in i){var a=i[o],l=a.xtype;if(l)switch(l){case"delete":i[o].itemId="delete",a.iconSVG||(a.iconSVG=fe);break;case"text":i[o]=new G;break;case"line":i[o]=new E;break;case"arrow":i[o]=new V;break;case"ellipse":i[o]=new N;break;case"rect":i[o]=new R;break;case"callout":i[o]=new _;break;case"image":i[o]=new U;break;case"blur":i[o]=new K;break;case"free-draw":i[o]=new D(e.config);break;case"save":a.iconSVG||(a.iconSVG=me)}}e.toolbar=new m(e.config,i,e.toolbarItemClickHandler,e)}if(n){var s=new q(e.config,[new ie,new le,new pe,new ge],e);s.setSelectedItems(e.selectedItems),e.propertiesToolbar=s}e.doLayout()},e.prototype.toolbarItemClickHandler=function(e,t){var r=this;if(r.toolbar.deselectAll(t),t instanceof s){var n=t,i=n.createAnnotator(r.config,r);if(null==i)return r.pushedAnnotator=null,void r.disableListeners(!1);i.moveBy((r.width-i.getWidth())/2,(r.height-i.getHeight())/2,null),r._addElement(i,r.drawStyle,r.fillStyle),r.deselectAll(),i.setSelected(!0),r.selectedItems.push(i),r.propertiesToolbar.setSelectedItems(r.selectedItems);var o=!!r.pushedAnnotator;n instanceof c?r.pushedAnnotator=i:r.pushedAnnotator&&(r.pushedAnnotator.stop(),r.pushedAnnotator=null),o!=!!r.pushedAnnotator&&(null!=r.pushedAnnotator?r.disableListeners(!0):r.disableListeners(!1))}else switch(r.disableListeners(!1),r.pushedAnnotator&&(r.pushedAnnotator.stop(),r.pushedAnnotator=null),t.itemId){case"delete":r.deleteSelection();break;case"save":r.save((function(e){r.completeCallback&&r.completeCallback(e)}),r.exportType)}},e.prototype.disableListeners=function(e){var t,r;try{for(var i=n(this.annotators),o=i.next();!o.done;o=i.next())o.value.getElement().style.pointerEvents=e?"none":"auto"}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype._addElement=function(e,t,r){var i,o,a=this;if(e.onSelectHandler=a.itemSelected,e.isOnTop()){var l=!1;try{for(var s=n(a.annotators),c=s.next();!c.done;c=s.next()){var d=c.value;if(!d.isOnTop()){a.svgContainer.insertBefore(e.getElement(),d.getElement()),l=!0;break}}}catch(e){i={error:e}}finally{try{c&&!c.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}l||a.svgContainer.appendChild(e.getElement())}else a.svgContainer.appendChild(e.getElement());t&&e.setDrawStyle(t),r&&e.setFillStyle(r),e instanceof P&&e.setFont(a.config.font),a.annotators.push(e)},e.prototype.addElement=function(e){this._addElement(e)},e.prototype.selectAll=function(){for(var e in this.selectedItems.length=0,this.annotators){var t=this.annotators[e];t.setSelected(!0),this.selectedItems.push(t)}this.propertiesToolbar.setSelectedItems(this.selectedItems)},e.prototype.deselectAll=function(){var e,t,r=this.selectedItems;try{for(var i=n(r),o=i.next();!o.done;o=i.next())o.value.setSelected(!1)}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}r.length=0,this.propertiesToolbar.setSelectedItems(r)},e.prototype.deleteSelection=function(){var e,t,r,i=this,o=i.annotators,a=[],l=i.selectedItems,s=i.svgContainer;if(0==i.selectedItems.length)i.clear();else{try{for(var c=n(o),d=c.next();!d.done;d=c.next())r=d.value,l.indexOf(r)>=0?(r.clean(),s.removeChild(r.getElement())):a.push(r)}catch(t){e={error:t}}finally{try{d&&!d.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}i.annotators=a,i.selectedItems.length=0,i.propertiesToolbar.setSelectedItems(i.selectedItems)}},e.prototype.clear=function(){var e=this,t=e.svgContainer;e.selectedItems.length=0,e.annotators.length=0;var r,n,i=t.children,o=i.length,a=e.rectSVGElement,l=e.defs;for(r=o-1;r>=0;r--)(n=i[r])!=a&&n!=l&&t.removeChild(n);for(var s=l.lastChild,c=e.imagePattern;s&&s!=c;)l.removeChild(s),s=l.lastChild},e.prototype.close=function(){},e.prototype.save=function(e,t){switch(this.deselectAll(),void 0===t&&(t=2),t){case 0:e(this.saveAsXML());break;case 1:e(this.saveAsJSON());break;case 3:e(this.saveAsSVG());break;default:this.saveAsPNG(e)}},e.prototype.loadXML=function(e){var t=(new DOMParser).parseFromString(e,"text/xml").getElementsByTagName("main");if(!t)throw"Invalid XML!";for(var r=t[0].firstChild,n=[this.config,this];r;){var i=w.create(r.nodeName,n);i.fromXML(r),i.setSelected(!1),this._addElement(i,null,null),i instanceof k&&i.stop(),r=r.nextSibling}},e.prototype.doLoadJSON=function(e){var t,r,i=e.data,o=[this.config,this];if(i)try{for(var a=n(i),l=a.next();!l.done;l=a.next()){var s=l.value;if(s.xtype){var c=w.create(s.xtype,o);c.fromJSON(s),c.setSelected(!1),this._addElement(c,null,null),c instanceof k&&c.stop()}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}},e.prototype.loadJSON=function(e){var t=JSON.parse(e),r=this,n=function(){r.imgLoaded?r.doLoadJSON(t):window.setTimeout(n,500)};if(!t||!t.v)throw"Invalid JSON Object!";n()},e.prototype.saveAsXML=function(){var e,t,r=document.implementation.createDocument(null,"ea",null),i=r.createElementNS(null,"main");r.documentElement.appendChild(i),i.setAttribute("v","1.0");try{for(var o=n(this.annotators),a=o.next();!a.done;a=o.next()){var l=a.value.toXML();l&&i.appendChild(l)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return(new XMLSerializer).serializeToString(r)},e.prototype.saveAsJSON=function(){var e,t,r=[];try{for(var i=n(this.annotators),o=i.next();!o.done;o=i.next()){var a=o.value.toJSON();r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}var l={v:"1.0",data:r};return JSON.stringify(l)},e.prototype.saveAsPNG=function(e){g.exportToPNG(this.imageElement,this.svgContainer,e)},e.prototype.saveAsSVG=function(){return this.svgContainer.outerHTML},e.prototype.getSVGContainer=function(){return this.svgContainer},e.prototype.getSelectedItems=function(){return this.selectedItems},e}();!function(e,t){void 0===t&&(t={});var r=t.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===r&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".default-btn-gradient{--color-stop-1:#56acb2;--color-stop-2:#2f80ed;--color-stop-3:#56aca2}.default-toolbar{position:absolute;height:30px;background-color:#d5d5d5;border-top-left-radius:5px;border-top-right-radius:5px;border:1px solid #101010;border-bottom:none}.default-toolbar-item{height:100%;text-align:center;cursor:pointer;position:relative;float:left;box-sizing:border-box}.default-toolbar-item-pressed{box-shadow:inset 0 0 10px #9a9a9a;-webkit-box-shadow:inset 0 0 10px #9a9a9a;-moz-box-shadow:inset 0 0 10px #9a9a9a;border-radius:5px;transition:border-radius .5s}.default-svg-text-element{cursor:default;-ms-user-select:none;-webkit-user-select:none;user-select:none}@media (hover:hover) and (pointer:fine){.default-toolbar-item:hover{background-color:#b0b0b0}}.default-toolbar-item svg{height:72%;margin-top:5px}.toolbar-url-icon{background-position:0 0;background-repeat:no-repeat;background-size:contain}.default-annotator-container{position:absolute;touch-action:none;-ms-touch-action:none}.default-annotator-select-rect{stroke-width:1px;stroke:#000;fill:transparent;stroke-dasharray:1}.annotator-back-line{stroke:transparent;stroke-width:25}.anotator-resize-element{stroke:#111;stroke-width:1;fill:#e8e8e8;opacity:.8}.default-annotator-line{stroke-width:2}.default-annotator-callout-shadow{fill:#000;fill-opacity:.5;fill-rule:evenodd;stroke:none;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:none;stroke-opacity:1;filter:url(#calloutFilter258);transform:translate(5px,10px)}.default-annotator-callout{fill-rule:evenodd;stroke:#000;stroke-width:2;stroke-linecap:butt;stroke-linejoin:round;stroke-dasharray:none;stroke-opacity:1}.default-annotator-text{stroke-width:1;stroke-dasharray:3,2;stroke-opacity:.5;fill:transparent;stroke:#000}.default-annotator-text span{cursor:default}.default-dialog{width:300px;height:200px;top:30px;border:1px solid #909090;position:absolute;display:none;background-color:#fbfbfb;box-shadow:2px 3px rgba(32,32,32,.12);border-radius:4px;z-index:12000}.default-dialog .body{width:300px;height:130px;padding:30px 10px 10px 20px;margin:0 auto}.default-dialog .btn-container .button{width:80px}.default-dialog .btn-container{width:100%;height:30px;text-align:center}.default-dialog .body *{float:left}.default-dialog .body select{margin-left:10px}.default-dialog .body .sample,.default-dialog div.button{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-khtml-user-select:none;-ms-user-select:none;user-select:none}.default-dialog .body .sample{border:1px dotted #a0a0a0;padding:0 20px;margin-top:10px;margin-bottom:7px;width:220px;text-align:center;max-height:80px;overflow:hidden}.default-dialog div.button{float:left;width:20px;height:20px;border:1px solid #d9d9d9;text-align:center;border-radius:3px;margin-left:5px;cursor:default}.default-dialog div.hover-button:hover{background-color:#e1e1e1}.default-dialog div.press-button{background-color:#d0d0d0}.default-dialog .label{margin-right:5px;padding-top:5px;clear:left;width:110px;touch-action:none;-ms-touch-action:none;-ms-user-select:none;-o-user-select:none;-webkit-user-select:none;user-select:none;font-family:Poppins,sans-serif;font-size:14px;color:#666}.default-dialog .slider{-webkit-appearance:none;appearance:none;width:150px;height:7px;background:#d3d3d3;outline:none;opacity:.7;-webkit-transition:.2s;transition:opacity .2s;margin:15px 0 15px 90px}.default-dialog .transparency{background:linear-gradient(90deg,transparent,#000),url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\"><path fill=\"white\" d=\"M1,0H2V1H1V0ZM0,1H1V2H0V1Z\"/><path fill=\"gray\" d=\"M0,0H1V1H0V0ZM1,1H2V2H1V1Z\"/></svg>');margin-left:0!important}.default-dialog .slider::-moz-range-thumb,.default-dialog .slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;background:#c6c6c6;cursor:pointer;border-radius:10px}.default-dialog .slider:disabled{background-color:#eaeaea;cursor:default}.default-dialog .slider:disabled::-moz-range-thumb,.default-dialog .slider:disabled::-webkit-slider-thumb{background-color:#ececec;border-color:#d2d2d2;cursor:default}.arrow-style-dropdown,.arrow-style-dropdown .body{width:75px!important}.arrow-style-dropdown .value{width:53px!important}.default-drop-down{width:150px;height:25px;border:1px solid #c8c8c8;margin-top:3px}.default-drop-down .body{width:150px;height:25px;padding:0}.default-drop-down .value{width:126px;height:25px;border-right:1px solid #e8e8e8}.default-drop-down .arrow{width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #424242;margin-top:10px;margin-left:6px}.default-drop-down .right-arrow{border-color:transparent #464646;border-style:solid;border-width:5px 0 5px 5px;height:0;width:0;position:absolute;margin:3px 0 0 130px!important}.subdrop-down{margin-left:139px!important;background-color:#fefefe;width:150px!important;margin-top:-20px!important;display:none;border:1px solid #c8c8c8;overflow:hidden}.subdrop-down .option>div:not(.checked){margin-left:0!important;float:left!important;margin-top:5px!important}.blur-option{width:100px}.blur-option div{background-repeat:no-repeat;background-image:url(\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'><path fill='black' d='M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 336H54a6 6 0 0 1-6-6V118a6 6 0 0 1 6-6h404a6 6 0 0 1 6 6v276a6 6 0 0 1-6 6zM128 152c-22.091 0-40 17.909-40 40s17.909 40 40 40 40-17.909 40-40-17.909-40-40-40zM96 352h320v-80l-87.515-87.515c-4.686-4.686-12.284-4.686-16.971 0L192 304l-39.515-39.515c-4.686-4.686-12.284-4.686-16.971 0L96 304v48z'></path></svg>\");width:20px;height:20px;float:right!important;margin-right:10px}.subdrop-down .option{padding-left:3px}.option .checked{background:url('data:image/svg+xml;charset=utf-8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\"><path d=\"M8.51 15.36l5.48 5.47 9.5-9.5\" fill=\"none\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"3\" stroke=\"%23000\"/></svg>');background-size:18px 18px;background-position:-20px -18px;width:18px!important;height:18px;float:right!important}.default-drop-down .options-container{width:100%;display:none;border:1px solid #e0e0e0;margin-left:-1px;padding-right:1px;background:#fff;position:relative;z-index:10000}.default-drop-down .options-container .option{height:25px;width:100%;border:1px solid transparent;cursor:default}.default-drop-down .options-container .option:hover{border:1px solid #e0e0e0;background-color:#f5f5f5}.default-drop-down .options-container .option>*{margin:3px auto;float:none;width:85%}.default-drop-down .options-container .option>.padding{width:10px}.default-drop-down .value *{width:90%;margin:5px auto;float:none}.default-dialog .body .color-picker{width:150px;height:25px;border:1px solid #e0e0e0;margin-top:5px}.fill-pattern1{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='20' x2='12' y2='0'/></svg>\")}.fill-pattern2{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='0' x2='12' y2='20'/></svg>\")}.fill-pattern3{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='6' y1='0' x2='6' y2='20'/></svg>\")}.fill-pattern4{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='5' x2='12' y2='5'/><line stroke='black' x1='0' y1='15' x2='12' y2='15'/></svg>\")}.fill-pattern5{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='6' y1='0' x2='6' y2='20'/><line stroke='black' x1='0' y1='5' x2='12' y2='5'/><line stroke='black' x1='0' y1='15' x2='12' y2='15'/></svg>\")}.fill-pattern6{background-image:url(\"data:image/svg+xml;utf8,<svg width='12px' height='20px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><line stroke='black' x1='0' y1='20' x2='12' y2='0'/><line stroke='black' x1='0' y1='0' x2='12' y2='20'/></svg>\")}.fill-pattern7{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 12 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 20 L12 0 M0 0 L12 20'></path></svg>\")}.fill-pattern8{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 10 10' version='1.1' xmlns='http://www.w3.org/2000/svg'><rect width='10' height='10' fill='transparent'/><circle cx='4' cy='4' r='1' fill='black'/></svg>\")}.fill-pattern9{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 10 10' version='1.1' xmlns='http://www.w3.org/2000/svg'><rect width='10' height='10' fill='transparent'/><circle cx='3' cy='3' r='2' fill='black'/></svg>\")}.arrow-style{height:20px;background-repeat:no-repeat}.arrow-style0{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M39 8 L3 8 M3 5 L1 8 L3 11 z'/></svg>\")}.arrow-style1{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L5 5 M0 8 L5 11 M0 8 L40 8'/></svg>\")}.arrow-style2{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 6 L4 6 L4 10 L0 10 z M4 8 L39 8'/></svg>\")}.arrow-style3{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M1 8 L4 5 L7 8 L4 11 z M1 8 L41 8'/></svg>\")}.arrow-style4{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M2 5 A 3 3 0 1 0 5 5 z M0 8 L39 8'/></svg>\")}.arrow-style5{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M1 5 L1 11 M0 8 L40 8'/></svg>\")}.arrow-style-end0{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L36 8 M36 5 L39 8 L36 11 z'/></svg>\")}.arrow-style-end1{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L40 8 M40 8 L35 5 M40 8 L35 11'/></svg>\")}.arrow-style-end2{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L35 8 M35 5 M0 8 L35 8 M35 6 L39 6 L39 10 L 35 10 z'/></svg>\")}.arrow-style-end3{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L35 8 M35 8 L38 5 L41 8 L 38 11 z'/></svg>\")}.arrow-style-end4{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L37 8 M37 5 M0 8 L37 8 M37 5 A 3 3 0 1 0 39 5 z'/></svg>\")}.arrow-style-end5{background-image:url(\"data:image/svg+xml;utf8,<svg width='50px' height='20px' viewBox='0 0 50 20' version='1.1' xmlns='http://www.w3.org/2000/svg'><path stroke='black' d='M0 8 L40 8 M40 5 L40 11'/></svg>\")}.arrow-style-none{background-color:#000;width:39px!important;margin-left:5px!important;margin-top:12px!important;height:2px!important}.arrow-no-fill{fill:transparent!important}.arrow-no-stroke{stroke:none!important}.fill-value div{margin-top:3px!important}.image-uploader{font-size:1000px;opacity:0}.image-uploader-text{width:100%;height:100%;position:absolute;text-align:center;font-size:calc((75vw - 4.5rem)/14)}.btn-disabled svg *{fill:#909090!important;cursor:default!important}.btn-disabled:hover{background:transparent!important}.btn-disabled{cursor:default!important}.shake{animation:shake .82s cubic-bezier(.36,.07,.19,.97) both;transform:translateZ(0);backface-visibility:hidden;perspective:1000px;stroke:red!important}@keyframes shake{10%,90%{transform:translate3d(-1px,0,0)}20%,80%{transform:translate3d(2px,0,0)}30%,50%,70%{transform:translate3d(-4px,0,0)}40%,60%{transform:translate3d(4px,0,0)}}.default-drop-down .value input{width:97%;margin-top:0;height:23px;border:none;padding-left:3px}.default-text-sel-rect{fill:transparent;stroke:#000;stroke-width:1;stroke-dasharray:1;display:none}.default-toolbar-more-btn{background-image:url(\"data:image/svg+xml;utf8,<svg width='10px' height='10px' viewBox='0 0 10 10' version='1.1' xmlns='http://www.w3.org/2000/svg'><circle stroke='black' cx='5' cy='5' r='5'/></svg>\")}.default-toolbar-submenu{position:absolute;width:28px;background-color:#d5d5d5;margin-top:30px;border:1px solid #101010;border-top:none;right:-1px}.default-toolbar-submenu-item{height:30px;margin-left:3px}.default-text-ann-btn-container{width:100%;height:40px;background:hsla(0,0%,51.8%,.75);background:linear-gradient(180deg,hsla(0,0%,51.8%,.75),#8c8c8c);margin-top:-2px}.default-text-ann-btn-container div{width:28px;height:26px;float:right;margin:4px 2px 2px;border-radius:3px;cursor:pointer;background-image:-moz-linear-gradient(top,#fff,hsla(0,0%,100%,0));background-image:linear-gradient(top,#fff,hsla(0,0%,100%,0));box-shadow:0 1px 0 rgba(0,0,0,.3),0 2px 2px -1px rgba(0,0,0,.5),inset 0 1px 0 hsla(0,0%,100%,.3)}.mobile-dropdown-container{position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;z-index:1000000!important}.default-mobile-dropdown-container{background-color:#eaeaea}.default-mobile-dropdown-container .option{height:30px!important;border-bottom:1px solid #fff;margin-left:3px!important;padding:10px 20px 0 0}.mobile-dropdown-container .sub-item>div{float:left}.mobile-dropdown-container .sub-item>div.right-arrow{width:6px;height:6px;float:right;border:solid #a2a2a2;border-width:0 2px 2px 0;padding:3px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);margin:4px 10px 0 0}.mobile-sub-dropdown{width:100%!important;height:100%!important;background-color:#eaeaea}.mobile-sub-option{width:100%;height:40px;border-bottom:1px solid #fff}.mobile-hide-elem,.mobile-show-elem{-webkit-animation-name:show-elem;-webkit-animation-duration:.3s;animation-name:show-elem;animation-duration:.3s;display:block;left:100%;position:absolute;animation-fill-mode:forwards;margin-left:0!important;z-index:100;top:0;height:100%;margin-top:40px!important}@-webkit-keyframes show-elem{0%{left:100%}to{left:0}}@keyframes show-elem{0%{left:100%}to{left:0}}.mobile-hide-elem{animation-name:hide-elem;-webkit-animation-name:hide-elem;left:0}@-webkit-keyframes hide-elem{0%{left:0}to{left:100%}}@keyframes hide-elem{0%{left:0}to{left:100%}}.mobile-sub-option>div.padding{width:20px!important}.mobile-sub-option .checked{margin-right:23px}.default-mobile-buttons{width:100%;height:40px;background-color:#eaeaea;border-bottom:1px solid #bababa}.default-mobile-buttons .back-button{float:left;width:6px;height:6px;border:solid #a2a2a2;border-width:2px 0 0 2px;padding:3px;transform:rotate(-45deg);-webkit-transform:rotate(-45deg);margin:12px 0 0 25px}.default-mobile-buttons .close-button{float:right;width:40px;height:40px;margin:5px 10px 0 0}.default-mobile-buttons .close-button:after,.default-mobile-buttons .close-button:before{position:absolute;content:\" \";height:30px;width:2px;background-color:#989898;margin-left:15px}.default-mobile-buttons .close-button:before{transform:rotate(45deg)}.default-mobile-buttons .close-button:after{transform:rotate(-45deg)}.ea-mobile-dialog{position:fixed;top:0;left:0;border:none;width:100vw;height:100vh}.default-toolbar-item svg ellipse,.default-toolbar-item svg line,.default-toolbar-item svg path,.default-toolbar-item svg rect{fill:url(#easyAnnotatorBtnGradient) #479;stroke:url(#easyAnnotatorBtnGradient) #479}.ea-color-picker{opacity:0;display:none;z-index:100000;position:fixed;border-radius:3px;background-color:#fff;width:230px;height:280px;top:0;left:0;border:1px solid #e1e1e1}.ea-picker-visible{display:block;transition:opacity .3s;opacity:1}.ea-color-picker .ea-color-selection{width:100%}.ea-color-picker .ea-palette-container{width:100%;position:relative}.ea-color-picker .ea-palette{background:linear-gradient(0deg,#000,transparent) repeat scroll 0 0,transparent linear-gradient(270deg,#00ff81,#fff) repeat scroll 0 0;height:125px}.ea-color-picker .ea-palette:before,.ea-color-picker .ea-swatches-panel>div:before{position:absolute;content:\"\";top:0;left:0;width:100%;height:100%;background:url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\"><path fill=\"white\" d=\"M1,0H2V1H1V0ZM0,1H1V2H0V1Z\"/><path fill=\"gray\" d=\"M0,0H1V1H0V0ZM1,1H2V2H1V1Z\"/></svg>');background-size:auto;background-size:.5em;border-radius:.15em;z-index:-1}.ea-color-picker .ea-picker{position:absolute;height:15px;width:15px;border:2px solid #fff;border-radius:100%;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.ea-color-picker .ea-selection-bottom{width:100%;height:60px}.ea-color-picker .ea-color-sample{float:left;width:2em;height:2em;border-radius:50em;margin:7px}.ea-color-picker .ea-color-chooser{height:7px;width:155px;float:left;margin:12px 0 0 10px;position:relative}.ea-color-picker .ea-slider{height:8px;background:linear-gradient(90deg,red,#ff0,#0f0,#0ff,#00f,#f0f,red);border-radius:3px}.ea-color-picker .ea-transparency{background:linear-gradient(90deg,transparent,#000),url('data:image/svg+xml;utf8, <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\"><path fill=\"white\" d=\"M1,0H2V1H1V0ZM0,1H1V2H0V1Z\"/><path fill=\"gray\" d=\"M0,0H1V1H0V0ZM1,1H2V2H1V1Z\"/></svg>');background-size:auto,auto;background-size:100%,.25em}.ea-color-picker .ea-slider-picker{top:-4px;width:13px;height:13px;background-color:#fff;border:1px solid grey}.ea-picker-target{cursor:pointer}.ea-color-picker .ea-swatches-panel{width:100%;height:60px;padding-left:10px}.ea-color-picker .ea-swatches-panel>div{width:23px;height:23px;position:relative;float:left;margin:3px;cursor:pointer}.ea-color-picker .ea-swatches-panel>div:before{background-size:6px;border-radius:2px}.ea-color-picker .ea-picker-buttons{width:100%;text-align:center}.ea-color-picker .ea-picker-buttons button{width:80px}"),function(e){try{return new MouseEvent("test"),!1}catch(e){}var t=function(e){function t(){var t=e.call(this,"")||this;return t._bubles=!1,t._cancelable=!1,t}return r(t,e),t}(MouseEvent),n=function(r,n){n||(n=new t);var i=document.createEvent("MouseEvent");return i.initMouseEvent(r,n._bubles,n._cancelable,e,0,n.screenX||0,n.screenY||0,n.clientX||0,n.clientY||0,n.ctrlKey||!1,n.altKey||!1,n.shiftKey||!1,n.metaKey||!1,n.button||0,n.relatedTarget||null),i};n.prototype=Event.prototype,e.MouseEvent=n}(window),(j=e.ExportType||(e.ExportType={}))[j.XML=0]="XML",j[j.JSON=1]="JSON",j[j.IMAGE=2]="IMAGE",j[j.SVG=3]="SVG",e.AnnotatorContainer=ve,e.ArrowToolbarItem=V,e.BlurToolbarItem=K,e.CalloutToolbarItem=_,e.EllipseToolbarItem=N,e.FreeDrawToolbarItem=D,e.ImageToolbarItem=U,e.LineToolbarItem=E,e.RectToolbarItem=R,e.TextToolbarItem=G,Object.defineProperty(e,"__esModule",{value:!0})}));
